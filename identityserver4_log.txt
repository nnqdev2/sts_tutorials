2019-01-26 07:04:53.272 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:04:53.635 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:04:53.635 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:04:53.635 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:04:53.635 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:04:53.635 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:04:53.635 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:04:53.902 -08:00 [DBG] Starting grant removal
2019-01-26 07:04:54.262 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:04:54.264 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:04:54.264 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:04:54.264 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:04:54.264 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:04:54.264 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:04:54.264 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:05:53.973 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-26 07:05:57.351 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-26 07:05:57.355 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-26 07:05:57.395 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 07:05:57.411 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 07:05:57.411 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 07:05:57.414 -08:00 [DBG] Start discovery request
2019-01-26 07:05:58.033 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-26 07:05:58.074 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 07:05:58.080 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 07:05:58.080 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 07:05:58.083 -08:00 [DBG] Start authorize request
2019-01-26 07:05:58.089 -08:00 [DBG] No user present in authorize request
2019-01-26 07:05:58.094 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:05:58.559 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:05:58.564 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:05:58.660 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:05:58.706 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:05:58.764 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:05:58.780 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:05:58.785 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:05:58.795 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"da16d7607b8948d1ab3c493b16b17f92","UiLocales":null,"Nonce":"9eabafe17c73460ea58af27e75cdedd4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"da16d7607b8948d1ab3c493b16b17f92","nonce":"9eabafe17c73460ea58af27e75cdedd4"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:05:58.805 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:06:50.516 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:06:50.753 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:06:50.753 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:06:50.817 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:06:50.838 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:06:50.930 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:06:50.953 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:06:50.953 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:07:38.324 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:07:38.325 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:11:49.940 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:11:50.018 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:11:50.018 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:11:50.018 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:11:50.018 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:11:50.018 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:11:50.018 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:11:50.084 -08:00 [DBG] Starting grant removal
2019-01-26 07:11:50.206 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-26 07:11:51.967 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-26 07:11:51.970 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-26 07:11:51.980 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:11:51.980 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:11:51.980 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:11:51.980 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:11:51.980 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:11:51.980 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:11:51.980 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:11:51.997 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 07:11:52.008 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 07:11:52.008 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 07:11:52.011 -08:00 [DBG] Start discovery request
2019-01-26 07:11:52.418 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-26 07:11:52.454 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 07:11:52.458 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 07:11:52.458 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 07:11:52.461 -08:00 [DBG] Start authorize request
2019-01-26 07:11:52.476 -08:00 [DBG] No user present in authorize request
2019-01-26 07:11:52.481 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:11:52.697 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:11:52.702 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:11:52.738 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:11:52.766 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:11:52.772 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:11:52.773 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:11:52.779 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:11:52.788 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"8ec9b5dab3c449ceb9ebda1fd1dfb400","UiLocales":null,"Nonce":"7621ad2f9eae4023994537732a05f029","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"8ec9b5dab3c449ceb9ebda1fd1dfb400","nonce":"7621ad2f9eae4023994537732a05f029"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:11:52.797 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:11:52.912 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:11:52.916 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:11:52.916 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:11:52.918 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:11:52.919 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:11:52.920 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:11:52.921 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:11:52.921 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:11:52.926 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:11:52.926 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:13:21.425 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:13:21.560 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:13:21.560 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:13:21.560 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:13:21.561 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:13:21.561 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:13:21.561 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:13:21.694 -08:00 [DBG] Starting grant removal
2019-01-26 07:13:22.032 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:13:22.033 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:13:22.034 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:13:22.034 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:13:22.034 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:13:22.034 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:13:22.034 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:13:43.106 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 07:14:01.867 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:14:07.642 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3K37OAICF:00000003","TimeStamp":"2019-01-26T15:14:07.0000000Z","ProcessId":16668,"LocalIpAddress":"127.0.0.1:41374","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:14:07.657 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:14:07.659 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:14:07.664 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:14:07.669 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:14:10.697 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 07:14:18.570 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:14:22.195 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3K37OAICE:00000004","TimeStamp":"2019-01-26T15:14:22.0000000Z","ProcessId":16668,"LocalIpAddress":"127.0.0.1:41374","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:14:22.195 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:14:22.195 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:14:22.195 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:14:22.196 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:14:24.134 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 07:15:40.297 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:15:40.440 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:15:40.440 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:15:40.440 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:15:40.440 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:15:40.440 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:15:40.440 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:15:40.578 -08:00 [DBG] Starting grant removal
2019-01-26 07:15:40.902 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:15:40.903 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:15:40.903 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:15:40.903 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:15:40.904 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:15:40.904 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:15:40.904 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:15:52.019 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 07:15:52.031 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 07:15:52.031 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 07:15:52.034 -08:00 [DBG] Start discovery request
2019-01-26 07:15:54.815 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-26 07:32:45.063 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:32:45.213 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:32:45.213 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:32:45.213 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:32:45.214 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:32:45.214 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:32:45.214 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:32:45.364 -08:00 [DBG] Starting grant removal
2019-01-26 07:32:45.747 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:32:45.749 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:32:45.749 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:32:45.749 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:32:45.749 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:32:45.749 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:32:45.750 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:35:28.956 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:35:29.100 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:35:29.101 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:35:29.101 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:35:29.101 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:35:29.101 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:35:29.101 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:35:29.236 -08:00 [DBG] Starting grant removal
2019-01-26 07:35:29.547 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:35:29.549 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:35:29.549 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:35:29.549 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:35:29.549 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:35:29.549 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:35:29.549 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:43:01.334 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:43:01.478 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:43:01.478 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:43:01.478 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:43:01.478 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:43:01.478 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:43:01.478 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:43:01.650 -08:00 [DBG] Starting grant removal
2019-01-26 07:43:01.952 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:43:01.953 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:43:01.954 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:43:01.954 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:43:01.954 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:43:01.954 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:43:01.954 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:51:10.259 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:51:10.393 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:51:10.393 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:51:10.393 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:51:10.394 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:51:10.394 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:51:10.394 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:51:10.526 -08:00 [DBG] Starting grant removal
2019-01-26 07:51:10.862 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:51:10.864 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:51:10.864 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:51:10.864 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:51:10.864 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:51:10.864 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:51:10.864 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:53:07.984 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:53:08.122 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:53:08.122 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:53:08.122 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:53:08.122 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:53:08.122 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:53:08.123 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:53:08.269 -08:00 [DBG] Starting grant removal
2019-01-26 07:53:08.642 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:53:08.644 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:53:08.644 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:53:08.644 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:53:08.644 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:53:08.644 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:53:08.644 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:53:36.461 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-26 07:53:38.739 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-26 07:53:38.742 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-26 07:53:38.743 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 07:53:38.753 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 07:53:38.754 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 07:53:38.756 -08:00 [DBG] Start discovery request
2019-01-26 07:53:39.301 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-26 07:53:39.338 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 07:53:39.341 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 07:53:39.341 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 07:53:39.345 -08:00 [DBG] Start authorize request
2019-01-26 07:53:39.351 -08:00 [DBG] No user present in authorize request
2019-01-26 07:53:39.355 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:53:39.744 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:53:39.748 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:53:39.856 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:53:39.907 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:53:39.958 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:53:39.973 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:53:39.979 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:53:39.989 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"250778bdb61e48ecbab944a38dd32677","UiLocales":null,"Nonce":"743d84ef5f0c40dba257bc5a6316d8e9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"250778bdb61e48ecbab944a38dd32677","nonce":"743d84ef5f0c40dba257bc5a6316d8e9"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:53:39.998 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:54:27.879 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-26 07:54:28.016 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-26 07:54:28.016 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-26 07:54:28.016 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-26 07:54:28.016 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-26 07:54:28.016 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-26 07:54:28.017 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-26 07:54:28.161 -08:00 [DBG] Starting grant removal
2019-01-26 07:54:28.477 -08:00 [DBG] Login Url: /Account/Login
2019-01-26 07:54:28.479 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-26 07:54:28.479 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-26 07:54:28.479 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-26 07:54:28.479 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-26 07:54:28.479 -08:00 [DBG] Error Url: /home/error
2019-01-26 07:54:28.479 -08:00 [DBG] Error Id Parameter: errorId
2019-01-26 07:55:04.184 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-26 07:55:06.018 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-26 07:55:06.022 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-26 07:55:06.023 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-26 07:55:06.034 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-26 07:55:06.034 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-26 07:55:06.036 -08:00 [DBG] Start discovery request
2019-01-26 07:55:06.646 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-26 07:55:06.676 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-26 07:55:06.680 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-26 07:55:06.680 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-26 07:55:06.683 -08:00 [DBG] Start authorize request
2019-01-26 07:55:06.690 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:06.693 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:07.090 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:07.094 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:07.178 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:07.228 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:07.280 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:07.296 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:07.302 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:07.312 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:07.320 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:25.935 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:26.197 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:26.197 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:26.265 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:26.287 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:26.362 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:26.384 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:26.384 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:26.602 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:26.602 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:26.631 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:26.856 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:26.856 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:26.937 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:26.962 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:27.034 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:27.077 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:27.077 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:27.292 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:27.292 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:27.315 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:28.122 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6L:00000002","TimeStamp":"2019-01-26T15:55:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:28.131 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:28.133 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:28.136 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:28.140 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:28.153 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:28.154 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:28.154 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:28.160 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:28.163 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:28.163 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:28.320 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:28.320 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:28.364 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:28.380 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:28.425 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:28.441 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:28.441 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:28.441 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:28.441 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:28.475 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:28.709 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:28.710 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:28.773 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:28.796 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:28.871 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:28.893 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:28.893 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:29.114 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:29.114 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:29.116 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:29.235 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:00000003","TimeStamp":"2019-01-26T15:55:29.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:29.235 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:29.235 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:29.235 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:29.235 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:29.240 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:29.241 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:29.241 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:29.241 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:29.241 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:29.241 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:29.394 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:29.394 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:29.442 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:29.457 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:29.500 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:29.515 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:29.515 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:29.515 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:29.515 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:29.535 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:29.768 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:29.769 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:29.832 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:29.854 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:29.919 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:29.939 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:29.939 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:30.143 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:30.143 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:30.144 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:30.286 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6L:00000003","TimeStamp":"2019-01-26T15:55:30.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:30.286 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:30.286 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:30.287 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:30.287 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:30.291 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:30.292 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:30.292 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:30.292 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:30.292 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:30.292 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:30.446 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:30.446 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:30.489 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:30.505 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:30.549 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:30.564 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:30.564 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:30.564 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:30.564 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:30.584 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:30.808 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:30.808 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:30.874 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:30.895 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:30.961 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:30.983 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:30.983 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:31.198 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:31.199 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:31.200 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:31.314 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:00000004","TimeStamp":"2019-01-26T15:55:31.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:31.314 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:31.314 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:31.314 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:31.315 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:31.320 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:31.320 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:31.320 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:31.320 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:31.320 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:31.320 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:31.482 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:31.482 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:31.526 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:31.541 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:31.587 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:31.602 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:31.602 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:31.602 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:31.602 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:31.624 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:31.853 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:31.853 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:31.921 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:31.942 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:32.007 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:32.029 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:32.029 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:32.240 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:32.240 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:32.241 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:32.364 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6L:00000004","TimeStamp":"2019-01-26T15:55:32.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:32.364 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:32.364 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:32.364 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:32.364 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:32.369 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:32.369 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:32.369 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:32.369 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:32.370 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:32.370 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:32.526 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:32.526 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:32.574 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:32.589 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:32.635 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:32.650 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:32.650 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:32.650 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:32.650 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:32.672 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:32.894 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:32.894 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:32.961 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:32.982 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:33.048 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:33.070 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:33.070 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:33.301 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:33.301 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:33.303 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:33.414 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:00000005","TimeStamp":"2019-01-26T15:55:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:33.414 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:33.414 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:33.414 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:33.414 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:33.419 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:33.419 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:33.419 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:33.420 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:33.420 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:33.420 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:33.576 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:33.576 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:33.621 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:33.635 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:33.680 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:33.695 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:33.695 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:33.695 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:33.695 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:33.716 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:33.956 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:33.956 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:34.022 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:34.043 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:34.109 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:34.131 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:34.131 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:34.341 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:34.341 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:34.342 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:34.448 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:34.693 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:34.693 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:34.758 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:34.778 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:34.845 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:34.867 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:34.867 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:35.072 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:35.072 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:35.073 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:35.183 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6N:00000005","TimeStamp":"2019-01-26T15:55:35.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:35.183 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:35.183 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:35.183 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:35.183 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:35.187 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:35.188 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:35.188 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:35.188 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:35.188 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:35.188 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:35.342 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:35.342 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:35.385 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:35.400 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:35.447 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:35.462 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:35.463 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:35.463 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:35.463 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:35.482 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:35.706 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:35.706 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:35.770 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:35.792 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:35.864 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:35.886 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:35.886 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:36.108 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:36.108 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:36.109 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:36.220 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6O:00000006","TimeStamp":"2019-01-26T15:55:36.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:36.221 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:36.221 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:36.221 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:36.221 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:36.225 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:36.226 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:36.226 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:36.226 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:36.226 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:36.226 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:36.383 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:36.383 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:36.427 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:36.441 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:36.509 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:36.523 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:36.524 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:36.524 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:36.524 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:36.543 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:36.788 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:36.788 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:36.852 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:36.875 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:36.940 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:36.962 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:36.962 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:37.167 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:37.167 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:37.168 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:37.280 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6N:00000006","TimeStamp":"2019-01-26T15:55:37.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:37.280 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:37.280 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:37.280 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:37.280 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:37.285 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:37.285 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:37.285 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:37.285 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:37.285 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:37.285 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:37.456 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:37.456 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:37.499 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:37.514 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:37.565 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:37.580 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:37.580 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:37.580 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:37.580 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:37.600 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:37.830 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:37.830 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:37.892 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:37.914 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:37.980 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:38.004 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:38.004 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:38.215 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:38.215 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:38.217 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:38.326 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6O:00000007","TimeStamp":"2019-01-26T15:55:38.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:38.326 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:38.326 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:38.326 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:38.326 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:38.330 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:38.331 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:38.331 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:38.331 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:38.331 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:38.331 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:38.492 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:38.492 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:38.553 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:38.569 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:38.617 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:38.631 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:38.631 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:38.632 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:38.632 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:38.650 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:38.883 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:38.883 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:38.947 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:38.969 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:39.036 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:39.058 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:39.058 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:39.264 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:39.264 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:39.266 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:39.376 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6N:00000007","TimeStamp":"2019-01-26T15:55:39.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:39.376 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:39.376 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:39.377 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:39.377 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:39.381 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:39.381 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:39.382 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:39.382 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:39.382 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:39.382 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:39.539 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:39.539 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:39.583 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:39.597 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:39.642 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:39.657 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:39.657 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:39.657 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:39.657 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:39.677 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:39.901 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:39.901 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:39.964 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:39.986 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:40.088 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:40.110 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:40.110 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:40.323 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:40.323 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:40.324 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:40.436 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6O:00000008","TimeStamp":"2019-01-26T15:55:40.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:40.436 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:40.436 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:40.436 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:40.436 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:40.441 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:40.441 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:40.441 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:40.441 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:40.441 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:40.441 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:40.617 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:40.617 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:40.662 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:40.682 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:40.728 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:40.743 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:40.743 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:40.743 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:40.743 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:40.763 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:40.988 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:40.988 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:41.057 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:41.085 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:41.153 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:41.175 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:41.175 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:41.390 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:41.390 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:41.391 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:41.519 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6N:00000008","TimeStamp":"2019-01-26T15:55:41.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:41.519 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:41.519 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:41.519 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:41.520 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:46.554 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:46.801 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:46.801 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:46.867 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:46.889 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:46.955 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:46.977 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:46.977 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:47.197 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:47.197 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:47.198 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:47.323 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:00000009","TimeStamp":"2019-01-26T15:55:47.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:47.323 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:47.323 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:47.323 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:47.324 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:47.328 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:47.329 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:47.329 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:47.329 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:47.329 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:47.329 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:47.488 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:47.488 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:47.537 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:47.552 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:47.599 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:47.614 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:47.614 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:47.614 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:47.614 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:47.635 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:47.864 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:47.864 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:47.930 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:47.952 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:48.017 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:48.041 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:48.041 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:48.264 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:48.264 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:48.265 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:48.382 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6L:00000009","TimeStamp":"2019-01-26T15:55:48.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:48.382 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:48.382 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:48.382 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:48.383 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:48.387 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:48.387 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:48.387 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:48.387 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:48.387 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:48.387 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:48.544 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:48.544 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:48.590 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:48.605 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:48.654 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:48.669 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:48.669 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:48.670 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:48.670 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:48.701 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:48.949 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:48.950 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:49.014 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:49.037 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:49.112 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:49.138 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:49.138 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:49.358 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:49.358 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:49.360 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:49.477 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:0000000A","TimeStamp":"2019-01-26T15:55:49.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:49.477 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:49.477 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:49.477 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:49.477 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:49.482 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:49.482 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:49.482 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:49.482 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:49.482 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:49.482 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:49.652 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:49.652 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:49.702 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:49.720 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:49.767 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:49.785 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:49.785 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:49.785 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:49.785 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:49.806 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:50.052 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:50.052 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:50.116 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:50.138 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:50.246 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:50.268 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:50.268 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:50.475 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:50.475 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:50.476 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:50.587 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6L:0000000A","TimeStamp":"2019-01-26T15:55:50.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:50.587 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:50.587 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:50.588 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:50.588 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:50.592 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:50.592 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:50.592 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:50.592 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:50.592 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:50.592 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:50.753 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:50.753 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:50.802 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:50.817 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:50.861 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:50.876 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:50.877 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:50.877 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:50.877 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:50.896 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:51.119 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:51.119 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:51.183 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:51.219 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:51.285 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:51.307 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:51.307 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:51.512 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:51.512 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:51.514 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:51.644 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:0000000B","TimeStamp":"2019-01-26T15:55:51.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:51.644 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:51.644 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:51.644 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:51.644 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:51.649 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:51.649 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:51.649 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:51.649 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:51.649 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:51.649 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:51.808 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:51.808 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:51.858 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:51.875 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:51.921 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:51.937 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:51.937 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:51.937 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:51.937 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:51.958 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:52.192 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:52.192 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:52.261 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:52.312 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:52.380 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:52.403 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:52.403 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:52.614 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:52.614 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:52.615 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:52.733 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6L:0000000B","TimeStamp":"2019-01-26T15:55:52.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:52.734 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:52.734 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:52.734 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:52.734 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:55:52.738 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:55:52.738 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:55:52.738 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:55:52.738 -08:00 [DBG] Start authorize callback request
2019-01-26 07:55:52.739 -08:00 [DBG] No user present in authorize request
2019-01-26 07:55:52.739 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:52.938 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:52.939 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:53.052 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:53.104 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:53.185 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:53.209 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:53.209 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:53.209 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:55:53.209 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:55:53.232 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:55:53.551 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:53.551 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:53.643 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:53.666 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:53.736 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:55:53.763 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:55:53.763 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:55:53.984 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:55:53.984 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:55:53.985 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:55:54.108 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6M:0000000C","TimeStamp":"2019-01-26T15:55:54.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:55:54.108 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:55:54.108 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:55:54.109 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:55:54.109 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:24.144 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:24.390 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:24.390 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:24.455 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:24.476 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:24.541 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:24.564 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:24.565 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:24.767 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:24.767 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:24.768 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:24.885 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6J:0000000D","TimeStamp":"2019-01-26T15:56:24.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:24.885 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:24.885 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:24.885 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:24.885 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:24.896 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:56:24.896 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:56:24.896 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:56:24.896 -08:00 [DBG] Start authorize callback request
2019-01-26 07:56:24.897 -08:00 [DBG] No user present in authorize request
2019-01-26 07:56:24.897 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:25.053 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:25.054 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:25.096 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:25.111 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:25.157 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:25.172 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:25.172 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:25.172 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:56:25.172 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:56:25.192 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:25.416 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:25.416 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:25.482 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:25.503 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:25.585 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:25.607 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:25.607 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:25.836 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:25.836 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:25.838 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:25.948 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6K:0000000E","TimeStamp":"2019-01-26T15:56:25.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:25.948 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:25.948 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:25.949 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:25.949 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:25.954 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:56:25.954 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:56:25.954 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:56:25.954 -08:00 [DBG] Start authorize callback request
2019-01-26 07:56:25.954 -08:00 [DBG] No user present in authorize request
2019-01-26 07:56:25.954 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:26.121 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:26.121 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:26.164 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:26.180 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:26.226 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:26.243 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:26.243 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:26.243 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:56:26.243 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:56:26.264 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:26.487 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:26.487 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:26.550 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:26.571 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:26.637 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:26.667 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:26.667 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:26.876 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:26.876 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:26.877 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:26.988 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6J:0000000E","TimeStamp":"2019-01-26T15:56:26.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:26.988 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:26.988 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:26.988 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:26.988 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:26.993 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:56:26.993 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:56:26.993 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:56:26.993 -08:00 [DBG] Start authorize callback request
2019-01-26 07:56:26.993 -08:00 [DBG] No user present in authorize request
2019-01-26 07:56:26.993 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:27.171 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:27.171 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:27.217 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:27.232 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:27.279 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:27.295 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:27.295 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:27.295 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:56:27.295 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:56:27.315 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:27.538 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:27.538 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:27.602 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:27.623 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:27.691 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:27.713 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:27.713 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:27.919 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:27.919 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:27.920 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:28.033 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6K:0000000F","TimeStamp":"2019-01-26T15:56:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:28.033 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:28.033 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:28.033 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:28.033 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:28.038 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:56:28.038 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:56:28.038 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:56:28.038 -08:00 [DBG] Start authorize callback request
2019-01-26 07:56:28.038 -08:00 [DBG] No user present in authorize request
2019-01-26 07:56:28.038 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:28.211 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:28.211 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:28.254 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:28.269 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:28.316 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:28.331 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:28.331 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:28.331 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:56:28.331 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:56:28.351 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:28.593 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:28.593 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:28.658 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:28.679 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:28.747 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:28.769 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:28.769 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:28.977 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:28.978 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:28.979 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:29.088 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6J:0000000F","TimeStamp":"2019-01-26T15:56:29.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:29.088 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:29.088 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:29.088 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:29.088 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:29.093 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:56:29.093 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:56:29.093 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:56:29.093 -08:00 [DBG] Start authorize callback request
2019-01-26 07:56:29.093 -08:00 [DBG] No user present in authorize request
2019-01-26 07:56:29.094 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:29.249 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:29.249 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:29.293 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:29.311 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:29.356 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:29.371 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:29.371 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:29.371 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:56:29.371 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:56:29.390 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:29.622 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:29.622 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:29.712 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:29.738 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:29.825 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:29.855 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:29.856 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:30.094 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:30.094 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:30.095 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:30.208 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6K:00000010","TimeStamp":"2019-01-26T15:56:30.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:30.208 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:30.208 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:30.208 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:30.209 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:56:30.213 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:56:30.213 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:56:30.213 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:56:30.214 -08:00 [DBG] Start authorize callback request
2019-01-26 07:56:30.214 -08:00 [DBG] No user present in authorize request
2019-01-26 07:56:30.214 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:30.382 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:30.382 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:30.425 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:30.439 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:30.483 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:30.500 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:30.501 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:30.501 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:56:30.501 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:56:30.520 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:56:30.745 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:30.745 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:30.810 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:30.832 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:30.896 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:56:30.919 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:56:30.919 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:56:31.186 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:56:31.186 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:56:31.187 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:56:31.327 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6J:00000010","TimeStamp":"2019-01-26T15:56:31.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:56:31.327 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:56:31.328 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:56:31.328 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:56:31.328 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:31.404 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:31.630 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:31.630 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:31.692 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:31.716 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:31.779 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:31.802 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:31.802 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:32.006 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:32.006 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:32.008 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:32.124 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:00000002","TimeStamp":"2019-01-26T15:57:32.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:32.124 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:32.124 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:32.124 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:32.125 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:32.136 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:57:32.136 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:57:32.136 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:57:32.136 -08:00 [DBG] Start authorize callback request
2019-01-26 07:57:32.137 -08:00 [DBG] No user present in authorize request
2019-01-26 07:57:32.137 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:32.294 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:32.294 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:32.340 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:32.361 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:32.417 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:32.431 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:32.431 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:32.431 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:57:32.432 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:57:32.461 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:32.697 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:32.697 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:32.769 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:32.791 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:32.855 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:32.877 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:32.877 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:33.084 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:33.084 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:33.085 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:33.202 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:00000005","TimeStamp":"2019-01-26T15:57:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:33.202 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:33.202 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:33.202 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:33.202 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:33.206 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:57:33.207 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:57:33.207 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:57:33.207 -08:00 [DBG] Start authorize callback request
2019-01-26 07:57:33.207 -08:00 [DBG] No user present in authorize request
2019-01-26 07:57:33.207 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:33.377 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:33.377 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:33.422 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:33.436 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:33.485 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:33.500 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:33.500 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:33.500 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:57:33.500 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:57:33.520 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:33.742 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:33.742 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:33.809 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:33.830 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:33.895 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:33.917 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:33.917 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:34.148 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:34.149 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:34.150 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:34.268 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:00000008","TimeStamp":"2019-01-26T15:57:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:34.268 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:34.268 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:34.268 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:34.268 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:34.279 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:57:34.280 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:57:34.280 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:57:34.280 -08:00 [DBG] Start authorize callback request
2019-01-26 07:57:34.280 -08:00 [DBG] No user present in authorize request
2019-01-26 07:57:34.280 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:34.434 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:34.434 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:34.478 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:34.493 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:34.551 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:34.567 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:34.567 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:34.567 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:57:34.567 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:57:34.587 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:34.832 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:34.832 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:34.901 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:34.925 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:34.990 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:35.012 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:35.012 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:35.218 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:35.219 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:35.220 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:35.332 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:0000000B","TimeStamp":"2019-01-26T15:57:35.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:35.332 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:35.332 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:35.332 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:35.333 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:35.343 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:57:35.344 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:57:35.344 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:57:35.344 -08:00 [DBG] Start authorize callback request
2019-01-26 07:57:35.344 -08:00 [DBG] No user present in authorize request
2019-01-26 07:57:35.344 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:35.520 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:35.520 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:35.565 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:35.580 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:35.625 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:35.639 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:35.639 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:35.639 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:57:35.640 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:57:35.660 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:35.885 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:35.885 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:35.951 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:35.973 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:36.038 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:36.060 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:36.060 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:36.278 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:36.278 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:36.279 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:36.420 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:0000000E","TimeStamp":"2019-01-26T15:57:36.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:36.421 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:36.421 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:36.421 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:36.421 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:36.425 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:57:36.426 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:57:36.426 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:57:36.426 -08:00 [DBG] Start authorize callback request
2019-01-26 07:57:36.426 -08:00 [DBG] No user present in authorize request
2019-01-26 07:57:36.426 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:36.585 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:36.585 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:36.629 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:36.672 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:36.717 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:36.731 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:36.732 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:36.732 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:57:36.732 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:57:36.754 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:36.992 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:36.992 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:37.059 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:37.082 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:37.148 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:37.176 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:37.176 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:37.385 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:37.385 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:37.387 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:37.499 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:00000011","TimeStamp":"2019-01-26T15:57:37.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:37.499 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:37.499 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:37.499 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:37.499 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 07:57:37.504 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 07:57:37.504 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 07:57:37.504 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 07:57:37.504 -08:00 [DBG] Start authorize callback request
2019-01-26 07:57:37.504 -08:00 [DBG] No user present in authorize request
2019-01-26 07:57:37.504 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:37.663 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:37.663 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:37.707 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:37.746 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:37.791 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:37.807 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:37.808 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:37.808 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 07:57:37.808 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 07:57:37.828 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 07:57:38.060 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:38.060 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:38.128 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:38.150 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:38.218 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 07:57:38.241 -08:00 [DBG] Found [] API scopes in database
2019-01-26 07:57:38.241 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 07:57:38.460 -08:00 [DBG] angular_spa found in database: true
2019-01-26 07:57:38.460 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 07:57:38.461 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 07:57:38.581 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6P:00000014","TimeStamp":"2019-01-26T15:57:38.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 07:57:38.581 -08:00 [DBG] Augmenting SignInContext
2019-01-26 07:57:38.581 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 07:57:38.582 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 07:57:38.582 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:38.635 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:39.328 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:39.329 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:39.397 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:39.423 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:39.492 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:39.514 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:39.514 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:39.716 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:39.716 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:39.742 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:39.961 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:39.961 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:40.025 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:40.046 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:40.132 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:40.153 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:40.154 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:40.365 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:40.365 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:40.367 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:40.481 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:00000003","TimeStamp":"2019-01-26T16:02:40.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:40.481 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:40.481 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:40.482 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:40.482 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:40.487 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:02:40.487 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:02:40.487 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:02:40.487 -08:00 [DBG] Start authorize callback request
2019-01-26 08:02:40.487 -08:00 [DBG] No user present in authorize request
2019-01-26 08:02:40.487 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:40.651 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:40.651 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:40.696 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:40.720 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:40.766 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:40.782 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:40.782 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:40.782 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:02:40.782 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:02:40.802 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:41.032 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:41.032 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:41.098 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:41.120 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:41.188 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:41.210 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:41.210 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:41.420 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:41.420 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:41.422 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:41.539 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:00000006","TimeStamp":"2019-01-26T16:02:41.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:41.539 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:41.539 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:41.539 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:41.540 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:41.544 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:02:41.545 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:02:41.545 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:02:41.545 -08:00 [DBG] Start authorize callback request
2019-01-26 08:02:41.545 -08:00 [DBG] No user present in authorize request
2019-01-26 08:02:41.545 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:41.740 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:41.740 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:41.790 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:41.805 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:41.850 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:41.865 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:41.865 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:41.865 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:02:41.865 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:02:41.886 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:42.113 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:42.113 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:42.179 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:42.208 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:42.290 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:42.312 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:42.312 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:42.524 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:42.524 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:42.526 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:42.643 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:00000009","TimeStamp":"2019-01-26T16:02:42.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:42.643 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:42.643 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:42.643 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:42.643 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:42.648 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:02:42.648 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:02:42.648 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:02:42.648 -08:00 [DBG] Start authorize callback request
2019-01-26 08:02:42.648 -08:00 [DBG] No user present in authorize request
2019-01-26 08:02:42.648 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:42.811 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:42.811 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:42.859 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:42.874 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:42.920 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:42.935 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:42.935 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:42.935 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:02:42.935 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:02:42.957 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:43.204 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:43.204 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:43.274 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:43.298 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:43.363 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:43.386 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:43.386 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:43.599 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:43.599 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:43.600 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:43.718 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:0000000C","TimeStamp":"2019-01-26T16:02:43.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:43.718 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:43.718 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:43.718 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:43.718 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:43.723 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:02:43.723 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:02:43.723 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:02:43.723 -08:00 [DBG] Start authorize callback request
2019-01-26 08:02:43.723 -08:00 [DBG] No user present in authorize request
2019-01-26 08:02:43.723 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:43.914 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:43.914 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:43.959 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:43.975 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:44.022 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:44.037 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:44.038 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:44.038 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:02:44.038 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:02:44.058 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:44.288 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:44.288 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:44.362 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:44.385 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:44.452 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:44.475 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:44.475 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:44.722 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:44.722 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:44.723 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:44.840 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:0000000F","TimeStamp":"2019-01-26T16:02:44.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:44.840 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:44.840 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:44.840 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:44.841 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:44.845 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:02:44.845 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:02:44.845 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:02:44.846 -08:00 [DBG] Start authorize callback request
2019-01-26 08:02:44.846 -08:00 [DBG] No user present in authorize request
2019-01-26 08:02:44.846 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:45.008 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:45.008 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:45.052 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:45.067 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:45.112 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:45.128 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:45.128 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:45.128 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:02:45.128 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:02:45.174 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:45.403 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:45.403 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:45.470 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:45.493 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:45.559 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:45.581 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:45.581 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:45.793 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:45.794 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:45.795 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:45.917 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:00000012","TimeStamp":"2019-01-26T16:02:45.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:45.917 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:45.917 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:45.917 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:45.917 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:02:45.922 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:02:45.922 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:02:45.922 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:02:45.922 -08:00 [DBG] Start authorize callback request
2019-01-26 08:02:45.922 -08:00 [DBG] No user present in authorize request
2019-01-26 08:02:45.922 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:46.097 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:46.097 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:46.143 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:46.159 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:46.206 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:46.222 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:46.222 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:46.222 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:02:46.222 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:02:46.244 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:02:46.511 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:46.511 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:46.577 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:46.599 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:46.667 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:02:46.691 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:02:46.691 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:02:46.903 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:02:46.903 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:02:46.905 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:02:47.024 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6Q:00000015","TimeStamp":"2019-01-26T16:02:47.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:02:47.025 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:02:47.025 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:02:47.025 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:02:47.025 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:47.062 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:47.771 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:47.771 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:47.843 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:47.887 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:47.953 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:47.975 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:47.976 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:48.188 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:48.188 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:48.214 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:48.440 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:48.440 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:48.505 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:48.527 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:48.597 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:48.624 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:48.624 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:48.831 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:48.831 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:48.839 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:49.446 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:00000003","TimeStamp":"2019-01-26T16:12:49.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:49.446 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:49.446 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:49.446 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:49.446 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:49.451 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:12:49.451 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:12:49.451 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:12:49.451 -08:00 [DBG] Start authorize callback request
2019-01-26 08:12:49.451 -08:00 [DBG] No user present in authorize request
2019-01-26 08:12:49.451 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:49.618 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:49.618 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:49.662 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:49.678 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:49.722 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:49.737 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:49.738 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:49.738 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:12:49.738 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:12:49.764 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:49.993 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:49.993 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:50.059 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:50.081 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:50.160 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:50.183 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:50.183 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:50.389 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:50.389 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:50.390 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:50.508 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:00000006","TimeStamp":"2019-01-26T16:12:50.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:50.509 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:50.509 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:50.509 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:50.509 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:50.513 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:12:50.514 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:12:50.514 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:12:50.514 -08:00 [DBG] Start authorize callback request
2019-01-26 08:12:50.514 -08:00 [DBG] No user present in authorize request
2019-01-26 08:12:50.514 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:50.671 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:50.671 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:50.733 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:50.748 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:50.792 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:50.808 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:50.808 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:50.808 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:12:50.808 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:12:50.843 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:51.070 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:51.070 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:51.135 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:51.158 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:51.224 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:51.247 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:51.247 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:51.457 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:51.457 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:51.458 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:51.567 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:00000009","TimeStamp":"2019-01-26T16:12:51.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:51.567 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:51.567 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:51.567 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:51.567 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:51.572 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:12:51.572 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:12:51.572 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:12:51.572 -08:00 [DBG] Start authorize callback request
2019-01-26 08:12:51.573 -08:00 [DBG] No user present in authorize request
2019-01-26 08:12:51.573 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:51.727 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:51.727 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:51.771 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:51.785 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:51.838 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:51.852 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:51.852 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:51.853 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:12:51.853 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:12:51.873 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:52.106 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:52.106 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:52.170 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:52.193 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:52.259 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:52.280 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:52.280 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:52.493 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:52.493 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:52.495 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:52.611 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:0000000C","TimeStamp":"2019-01-26T16:12:52.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:52.611 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:52.611 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:52.611 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:52.612 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:52.617 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:12:52.617 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:12:52.617 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:12:52.617 -08:00 [DBG] Start authorize callback request
2019-01-26 08:12:52.617 -08:00 [DBG] No user present in authorize request
2019-01-26 08:12:52.617 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:52.770 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:52.770 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:52.813 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:52.828 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:52.892 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:52.906 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:52.906 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:52.906 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:12:52.906 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:12:52.926 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:53.151 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:53.152 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:53.218 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:53.240 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:53.304 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:53.326 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:53.326 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:53.529 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:53.529 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:53.530 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:53.643 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:0000000F","TimeStamp":"2019-01-26T16:12:53.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:53.643 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:53.643 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:53.644 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:53.644 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:53.648 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:12:53.648 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:12:53.648 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:12:53.648 -08:00 [DBG] Start authorize callback request
2019-01-26 08:12:53.649 -08:00 [DBG] No user present in authorize request
2019-01-26 08:12:53.649 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:53.805 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:53.805 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:53.858 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:53.873 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:53.919 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:53.966 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:53.966 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:53.966 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:12:53.966 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:12:53.986 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:54.218 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:54.218 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:54.284 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:54.306 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:54.372 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:54.394 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:54.394 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:54.601 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:54.601 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:54.602 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:54.715 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:00000012","TimeStamp":"2019-01-26T16:12:54.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:54.715 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:54.715 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:54.716 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:54.716 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:12:54.720 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:12:54.720 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:12:54.720 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:12:54.720 -08:00 [DBG] Start authorize callback request
2019-01-26 08:12:54.721 -08:00 [DBG] No user present in authorize request
2019-01-26 08:12:54.721 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:54.877 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:54.877 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:54.934 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:54.950 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:55.029 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:55.045 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:55.045 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:55.045 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:12:55.045 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:12:55.065 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:12:55.289 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:55.289 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:55.375 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:55.396 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:55.460 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:12:55.483 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:12:55.483 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:12:55.689 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:12:55.689 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:12:55.690 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:12:55.805 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6R:00000015","TimeStamp":"2019-01-26T16:12:55.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:12:55.805 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:12:55.805 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:12:55.805 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:12:55.805 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:42:55.837 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:42:58.039 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:42:58.039 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:42:58.107 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:42:58.132 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:42:58.198 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:42:58.220 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:42:58.220 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:42:58.418 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:42:58.418 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:42:58.441 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:42:58.691 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:42:58.691 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:42:58.756 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:42:58.778 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:42:58.842 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:42:58.864 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:42:58.864 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:42:59.065 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:42:59.066 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:42:59.180 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:42:59.794 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:00000003","TimeStamp":"2019-01-26T16:42:59.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:42:59.794 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:42:59.794 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:42:59.794 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:42:59.795 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:42:59.799 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:42:59.800 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:42:59.800 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:42:59.800 -08:00 [DBG] Start authorize callback request
2019-01-26 08:42:59.800 -08:00 [DBG] No user present in authorize request
2019-01-26 08:42:59.800 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:42:59.952 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:42:59.952 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:42:59.994 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:00.017 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:00.061 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:00.076 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:00.076 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:00.076 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:43:00.077 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:43:00.108 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:00.346 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:00.346 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:00.408 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:00.430 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:00.494 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:00.517 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:00.518 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:00.718 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:00.718 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:00.720 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:43:00.828 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:00000006","TimeStamp":"2019-01-26T16:43:00.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:43:00.828 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:43:00.828 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:43:00.828 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:43:00.828 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:43:00.833 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:43:00.833 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:43:00.833 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:43:00.833 -08:00 [DBG] Start authorize callback request
2019-01-26 08:43:00.833 -08:00 [DBG] No user present in authorize request
2019-01-26 08:43:00.834 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:00.991 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:00.991 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:01.034 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:01.049 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:01.092 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:01.106 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:01.106 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:01.106 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:43:01.107 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:43:01.126 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:01.385 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:01.385 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:01.449 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:01.471 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:01.543 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:01.564 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:01.564 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:01.798 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:01.799 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:01.800 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:43:01.910 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:00000009","TimeStamp":"2019-01-26T16:43:01.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:43:01.910 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:43:01.910 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:43:01.910 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:43:01.910 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:43:01.915 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:43:01.915 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:43:01.916 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:43:01.916 -08:00 [DBG] Start authorize callback request
2019-01-26 08:43:01.916 -08:00 [DBG] No user present in authorize request
2019-01-26 08:43:01.916 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:02.072 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:02.072 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:02.114 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:02.129 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:02.173 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:02.188 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:02.188 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:02.188 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:43:02.189 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:43:02.207 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:02.433 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:02.433 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:02.519 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:02.540 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:02.604 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:02.625 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:02.625 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:02.829 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:02.829 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:02.830 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:43:02.940 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:0000000C","TimeStamp":"2019-01-26T16:43:02.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:43:02.941 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:43:02.941 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:43:02.941 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:43:02.941 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:43:02.945 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:43:02.945 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:43:02.945 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:43:02.945 -08:00 [DBG] Start authorize callback request
2019-01-26 08:43:02.946 -08:00 [DBG] No user present in authorize request
2019-01-26 08:43:02.946 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:03.096 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:03.096 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:03.161 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:03.176 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:03.220 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:03.234 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:03.234 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:03.234 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:43:03.234 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:43:03.253 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:03.476 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:03.476 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:03.540 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:03.584 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:03.652 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:03.673 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:03.674 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:03.875 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:03.875 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:03.877 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:43:03.990 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:0000000F","TimeStamp":"2019-01-26T16:43:03.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:43:03.991 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:43:03.991 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:43:03.991 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:43:03.991 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:43:03.995 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:43:03.996 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:43:03.996 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:43:03.996 -08:00 [DBG] Start authorize callback request
2019-01-26 08:43:03.996 -08:00 [DBG] No user present in authorize request
2019-01-26 08:43:03.996 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:04.145 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:04.145 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:04.187 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:04.206 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:04.252 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:04.267 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:04.267 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:04.267 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:43:04.268 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:43:04.287 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:04.506 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:04.506 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:04.570 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:04.593 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:04.686 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:04.708 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:04.708 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:04.912 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:04.912 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:04.914 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:43:05.021 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:00000012","TimeStamp":"2019-01-26T16:43:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:43:05.021 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:43:05.021 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:43:05.022 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:43:05.022 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:43:05.026 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 08:43:05.026 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 08:43:05.026 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 08:43:05.026 -08:00 [DBG] Start authorize callback request
2019-01-26 08:43:05.027 -08:00 [DBG] No user present in authorize request
2019-01-26 08:43:05.027 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:05.258 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:05.258 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:05.299 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:05.313 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:05.363 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:05.379 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:05.379 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:05.379 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 08:43:05.379 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 08:43:05.399 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 08:43:05.626 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:05.626 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:05.691 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:05.711 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:05.782 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 08:43:05.804 -08:00 [DBG] Found [] API scopes in database
2019-01-26 08:43:05.804 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 08:43:06.028 -08:00 [DBG] angular_spa found in database: true
2019-01-26 08:43:06.028 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 08:43:06.029 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 08:43:06.141 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6S:00000015","TimeStamp":"2019-01-26T16:43:06.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 08:43:06.141 -08:00 [DBG] Augmenting SignInContext
2019-01-26 08:43:06.141 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 08:43:06.141 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 08:43:06.141 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 08:54:28.638 -08:00 [INF] Removing 0 grants
2019-01-26 09:13:06.167 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:08.262 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:08.263 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:08.329 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:08.354 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:08.422 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:08.443 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:08.443 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:08.641 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:08.641 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:08.666 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:08.899 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:08.899 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:08.961 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:08.982 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:09.051 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:09.072 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:09.072 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:09.273 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:09.273 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:09.281 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:09.846 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:00000003","TimeStamp":"2019-01-26T17:13:09.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:09.846 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:09.846 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:09.846 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:09.847 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:13:09.851 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:13:09.852 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:13:09.852 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:13:09.852 -08:00 [DBG] Start authorize callback request
2019-01-26 09:13:09.852 -08:00 [DBG] No user present in authorize request
2019-01-26 09:13:09.852 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:10.004 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:10.004 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:10.046 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:10.065 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:10.110 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:10.125 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:10.126 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:10.126 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:13:10.126 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:13:10.146 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:10.374 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:10.374 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:10.437 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:10.458 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:10.522 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:10.549 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:10.549 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:10.755 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:10.755 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:10.757 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:10.888 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:00000006","TimeStamp":"2019-01-26T17:13:10.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:10.888 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:10.889 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:10.889 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:10.889 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:13:10.893 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:13:10.894 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:13:10.894 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:13:10.894 -08:00 [DBG] Start authorize callback request
2019-01-26 09:13:10.894 -08:00 [DBG] No user present in authorize request
2019-01-26 09:13:10.894 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:11.050 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:11.050 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:11.091 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:11.106 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:11.148 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:11.163 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:11.164 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:11.164 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:13:11.164 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:13:11.183 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:11.403 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:11.404 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:11.472 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:11.494 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:11.558 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:11.579 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:11.579 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:11.800 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:11.800 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:11.801 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:11.936 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:00000009","TimeStamp":"2019-01-26T17:13:11.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:11.936 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:11.936 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:11.936 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:11.936 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:13:11.940 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:13:11.941 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:13:11.941 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:13:11.941 -08:00 [DBG] Start authorize callback request
2019-01-26 09:13:11.941 -08:00 [DBG] No user present in authorize request
2019-01-26 09:13:11.941 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:12.090 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:12.090 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:12.137 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:12.152 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:12.197 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:12.211 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:12.211 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:12.211 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:13:12.211 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:13:12.231 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:12.457 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:12.457 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:12.541 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:12.566 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:12.631 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:12.658 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:12.658 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:12.863 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:12.863 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:12.864 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:12.974 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:0000000C","TimeStamp":"2019-01-26T17:13:12.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:12.974 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:12.974 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:12.975 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:12.975 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:13:12.980 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:13:12.980 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:13:12.980 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:13:12.980 -08:00 [DBG] Start authorize callback request
2019-01-26 09:13:12.980 -08:00 [DBG] No user present in authorize request
2019-01-26 09:13:12.980 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:13.129 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:13.129 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:13.171 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:13.191 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:13.240 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:13.255 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:13.255 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:13.255 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:13:13.255 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:13:13.274 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:13.524 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:13.524 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:13.587 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:13.609 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:13.676 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:13.697 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:13.697 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:13.903 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:13.903 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:13.905 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:14.010 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:0000000F","TimeStamp":"2019-01-26T17:13:14.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:14.011 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:14.011 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:14.011 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:14.011 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:13:14.018 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:13:14.019 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:13:14.019 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:13:14.019 -08:00 [DBG] Start authorize callback request
2019-01-26 09:13:14.019 -08:00 [DBG] No user present in authorize request
2019-01-26 09:13:14.019 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:14.208 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:14.208 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:14.251 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:14.266 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:14.317 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:14.332 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:14.332 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:14.332 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:13:14.332 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:13:14.351 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:14.571 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:14.571 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:14.634 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:14.661 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:14.726 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:14.750 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:14.750 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:14.989 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:14.989 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:14.991 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:15.146 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:00000012","TimeStamp":"2019-01-26T17:13:15.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:15.146 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:15.146 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:15.146 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:15.146 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:13:15.151 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:13:15.151 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:13:15.151 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:13:15.151 -08:00 [DBG] Start authorize callback request
2019-01-26 09:13:15.151 -08:00 [DBG] No user present in authorize request
2019-01-26 09:13:15.151 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:15.309 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:15.309 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:15.358 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:15.374 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:15.419 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:15.433 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:15.434 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:15.434 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:13:15.434 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:13:15.453 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:13:15.677 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:15.677 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:15.741 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:15.762 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:15.830 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:13:15.852 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:13:15.852 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:13:16.062 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:13:16.062 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:13:16.063 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:13:16.174 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6T:00000015","TimeStamp":"2019-01-26T17:13:16.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:13:16.174 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:13:16.175 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:13:16.175 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:13:16.175 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:16.209 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:18.373 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:18.373 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:18.441 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:18.465 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:18.533 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:18.554 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:18.554 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:18.757 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:18.757 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:18.775 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:18.993 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:18.993 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:19.055 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:19.076 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:19.138 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:19.159 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:19.159 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:19.361 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:19.362 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:19.370 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:19.965 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:00000003","TimeStamp":"2019-01-26T17:43:19.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:19.966 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:19.966 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:19.966 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:19.966 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:19.971 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:43:19.971 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:43:19.971 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:43:19.971 -08:00 [DBG] Start authorize callback request
2019-01-26 09:43:19.971 -08:00 [DBG] No user present in authorize request
2019-01-26 09:43:19.971 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:20.130 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:20.130 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:20.172 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:20.187 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:20.231 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:20.246 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:20.246 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:20.246 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:43:20.247 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:43:20.266 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:20.507 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:20.507 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:20.572 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:20.594 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:20.657 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:20.679 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:20.679 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:20.881 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:20.881 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:20.882 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:21.021 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:00000006","TimeStamp":"2019-01-26T17:43:21.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:21.021 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:21.021 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:21.021 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:21.021 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:21.026 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:43:21.026 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:43:21.026 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:43:21.026 -08:00 [DBG] Start authorize callback request
2019-01-26 09:43:21.026 -08:00 [DBG] No user present in authorize request
2019-01-26 09:43:21.026 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:21.185 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:21.186 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:21.229 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:21.243 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:21.285 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:21.300 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:21.301 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:21.301 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:43:21.301 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:43:21.321 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:21.542 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:21.542 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:21.606 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:21.628 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:21.695 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:21.716 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:21.716 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:21.922 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:21.922 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:21.923 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:22.066 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:00000009","TimeStamp":"2019-01-26T17:43:22.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:22.066 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:22.066 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:22.066 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:22.066 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:22.071 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:43:22.071 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:43:22.071 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:43:22.071 -08:00 [DBG] Start authorize callback request
2019-01-26 09:43:22.072 -08:00 [DBG] No user present in authorize request
2019-01-26 09:43:22.072 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:22.224 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:22.224 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:22.272 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:22.287 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:22.335 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:22.349 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:22.350 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:22.350 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:43:22.350 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:43:22.369 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:22.601 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:22.601 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:22.676 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:22.698 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:22.774 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:22.797 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:22.797 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:23.010 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:23.010 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:23.012 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:23.154 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:0000000C","TimeStamp":"2019-01-26T17:43:23.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:23.154 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:23.154 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:23.154 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:23.154 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:23.159 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:43:23.159 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:43:23.159 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:43:23.159 -08:00 [DBG] Start authorize callback request
2019-01-26 09:43:23.159 -08:00 [DBG] No user present in authorize request
2019-01-26 09:43:23.159 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:23.315 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:23.315 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:23.357 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:23.371 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:23.421 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:23.438 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:23.438 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:23.438 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:43:23.438 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:43:23.458 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:23.679 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:23.679 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:23.745 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:23.766 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:23.829 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:23.851 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:23.851 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:24.053 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:24.053 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:24.055 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:24.198 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:0000000F","TimeStamp":"2019-01-26T17:43:24.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:24.198 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:24.199 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:24.199 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:24.199 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:24.203 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:43:24.204 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:43:24.204 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:43:24.204 -08:00 [DBG] Start authorize callback request
2019-01-26 09:43:24.204 -08:00 [DBG] No user present in authorize request
2019-01-26 09:43:24.204 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:24.427 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:24.427 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:24.523 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:24.555 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:24.622 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:24.637 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:24.637 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:24.637 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:43:24.638 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:43:24.657 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:24.898 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:24.898 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:24.961 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:24.982 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:25.053 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:25.075 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:25.075 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:25.285 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:25.285 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:25.286 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:25.398 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:00000012","TimeStamp":"2019-01-26T17:43:25.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:25.398 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:25.398 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:25.398 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:25.398 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:43:25.406 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 09:43:25.406 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 09:43:25.406 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 09:43:25.406 -08:00 [DBG] Start authorize callback request
2019-01-26 09:43:25.406 -08:00 [DBG] No user present in authorize request
2019-01-26 09:43:25.406 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:25.567 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:25.567 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:25.628 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:25.644 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:25.687 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:25.703 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:25.703 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:25.703 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 09:43:25.703 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 09:43:25.723 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 09:43:25.955 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:25.956 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:26.032 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:26.053 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:26.118 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 09:43:26.140 -08:00 [DBG] Found [] API scopes in database
2019-01-26 09:43:26.141 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 09:43:26.351 -08:00 [DBG] angular_spa found in database: true
2019-01-26 09:43:26.351 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 09:43:26.353 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 09:43:26.481 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6U:00000015","TimeStamp":"2019-01-26T17:43:26.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 09:43:26.481 -08:00 [DBG] Augmenting SignInContext
2019-01-26 09:43:26.481 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 09:43:26.482 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 09:43:26.482 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 09:54:29.039 -08:00 [INF] Removing 0 grants
2019-01-26 10:13:26.410 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:28.626 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:28.626 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:28.693 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:28.718 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:28.793 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:28.814 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:28.814 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:29.015 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:29.016 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:29.034 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:29.253 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:29.253 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:29.314 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:29.335 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:29.397 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:29.417 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:29.418 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:29.617 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:29.617 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:29.638 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:30.301 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:00000003","TimeStamp":"2019-01-26T18:13:30.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:30.301 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:30.301 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:30.301 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:30.301 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:13:30.306 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:13:30.307 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:13:30.307 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:13:30.307 -08:00 [DBG] Start authorize callback request
2019-01-26 10:13:30.307 -08:00 [DBG] No user present in authorize request
2019-01-26 10:13:30.307 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:30.475 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:30.475 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:30.517 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:30.538 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:30.587 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:30.602 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:30.603 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:30.603 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:13:30.603 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:13:30.622 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:30.844 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:30.844 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:30.907 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:30.928 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:30.993 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:31.015 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:31.015 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:31.226 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:31.226 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:31.227 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:31.336 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:00000006","TimeStamp":"2019-01-26T18:13:31.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:31.336 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:31.336 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:31.336 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:31.336 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:13:31.341 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:13:31.341 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:13:31.341 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:13:31.341 -08:00 [DBG] Start authorize callback request
2019-01-26 10:13:31.341 -08:00 [DBG] No user present in authorize request
2019-01-26 10:13:31.341 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:31.512 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:31.512 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:31.553 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:31.568 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:31.611 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:31.625 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:31.626 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:31.626 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:13:31.626 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:13:31.645 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:31.862 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:31.862 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:31.952 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:31.973 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:32.038 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:32.059 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:32.059 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:32.272 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:32.272 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:32.273 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:32.403 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:00000009","TimeStamp":"2019-01-26T18:13:32.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:32.403 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:32.403 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:32.403 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:32.403 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:13:32.407 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:13:32.408 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:13:32.408 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:13:32.408 -08:00 [DBG] Start authorize callback request
2019-01-26 10:13:32.408 -08:00 [DBG] No user present in authorize request
2019-01-26 10:13:32.408 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:32.581 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:32.581 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:32.624 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:32.639 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:32.683 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:32.697 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:32.697 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:32.697 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:13:32.697 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:13:32.716 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:32.943 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:32.944 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:33.024 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:33.048 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:33.114 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:33.136 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:33.136 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:33.343 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:33.343 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:33.344 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:33.453 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:0000000C","TimeStamp":"2019-01-26T18:13:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:33.453 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:33.453 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:33.454 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:33.454 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:13:33.458 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:13:33.458 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:13:33.458 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:13:33.458 -08:00 [DBG] Start authorize callback request
2019-01-26 10:13:33.459 -08:00 [DBG] No user present in authorize request
2019-01-26 10:13:33.459 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:33.635 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:33.635 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:33.677 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:33.691 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:33.742 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:33.758 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:33.758 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:33.758 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:13:33.758 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:13:33.778 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:34.006 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:34.007 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:34.072 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:34.093 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:34.156 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:34.179 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:34.179 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:34.379 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:34.379 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:34.381 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:34.490 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:0000000F","TimeStamp":"2019-01-26T18:13:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:34.491 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:34.491 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:34.491 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:34.491 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:13:34.495 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:13:34.495 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:13:34.495 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:13:34.495 -08:00 [DBG] Start authorize callback request
2019-01-26 10:13:34.496 -08:00 [DBG] No user present in authorize request
2019-01-26 10:13:34.496 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:34.677 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:34.677 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:34.721 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:34.737 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:34.780 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:34.795 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:34.795 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:34.796 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:13:34.796 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:13:34.815 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:35.079 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:35.079 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:35.171 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:35.192 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:35.255 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:35.277 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:35.277 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:35.486 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:35.486 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:35.487 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:35.600 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:00000012","TimeStamp":"2019-01-26T18:13:35.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:35.600 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:35.601 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:35.601 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:35.601 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:13:35.606 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:13:35.606 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:13:35.606 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:13:35.606 -08:00 [DBG] Start authorize callback request
2019-01-26 10:13:35.606 -08:00 [DBG] No user present in authorize request
2019-01-26 10:13:35.606 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:35.757 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:35.757 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:35.812 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:35.827 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:35.872 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:35.886 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:35.886 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:35.886 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:13:35.886 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:13:35.905 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:13:36.136 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:36.136 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:36.200 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:36.221 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:36.289 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:13:36.312 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:13:36.312 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:13:36.525 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:13:36.525 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:13:36.527 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:13:36.635 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J6V:00000015","TimeStamp":"2019-01-26T18:13:36.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:13:36.635 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:13:36.635 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:13:36.635 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:13:36.635 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:36.606 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:38.791 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:38.791 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:38.861 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:38.885 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:38.978 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:39.000 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:39.001 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:39.218 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:39.218 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:39.237 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:39.462 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:39.462 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:39.525 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:39.546 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:39.614 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:39.637 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:39.638 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:39.845 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:39.846 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:39.854 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:40.452 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:00000003","TimeStamp":"2019-01-26T18:43:40.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:40.453 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:40.453 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:40.453 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:40.453 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:40.464 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:43:40.464 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:43:40.464 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:43:40.464 -08:00 [DBG] Start authorize callback request
2019-01-26 10:43:40.464 -08:00 [DBG] No user present in authorize request
2019-01-26 10:43:40.464 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:40.657 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:40.657 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:40.701 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:40.716 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:40.765 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:40.781 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:40.781 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:40.781 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:43:40.781 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:43:40.801 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:41.033 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:41.033 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:41.097 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:41.119 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:41.182 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:41.207 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:41.207 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:41.439 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:41.439 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:41.440 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:41.548 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:00000006","TimeStamp":"2019-01-26T18:43:41.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:41.548 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:41.548 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:41.548 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:41.549 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:41.553 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:43:41.553 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:43:41.553 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:43:41.553 -08:00 [DBG] Start authorize callback request
2019-01-26 10:43:41.553 -08:00 [DBG] No user present in authorize request
2019-01-26 10:43:41.553 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:41.716 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:41.716 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:41.760 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:41.774 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:41.822 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:41.837 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:41.837 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:41.837 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:43:41.837 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:43:41.856 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:42.106 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:42.107 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:42.200 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:42.222 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:42.290 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:42.311 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:42.311 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:42.510 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:42.510 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:42.511 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:42.635 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:00000009","TimeStamp":"2019-01-26T18:43:42.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:42.635 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:42.635 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:42.635 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:42.635 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:42.640 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:43:42.640 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:43:42.640 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:43:42.640 -08:00 [DBG] Start authorize callback request
2019-01-26 10:43:42.641 -08:00 [DBG] No user present in authorize request
2019-01-26 10:43:42.641 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:42.802 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:42.802 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:42.846 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:42.860 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:42.905 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:42.920 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:42.920 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:42.920 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:43:42.920 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:43:42.939 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:43.191 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:43.191 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:43.257 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:43.280 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:43.344 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:43.365 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:43.366 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:43.571 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:43.571 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:43.572 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:43.692 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:0000000C","TimeStamp":"2019-01-26T18:43:43.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:43.692 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:43.692 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:43.692 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:43.692 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:43.697 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:43:43.697 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:43:43.697 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:43:43.697 -08:00 [DBG] Start authorize callback request
2019-01-26 10:43:43.698 -08:00 [DBG] No user present in authorize request
2019-01-26 10:43:43.698 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:43.865 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:43.865 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:43.909 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:43.938 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:43.992 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:44.007 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:44.007 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:44.007 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:43:44.007 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:43:44.027 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:44.297 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:44.297 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:44.360 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:44.382 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:44.455 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:44.477 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:44.477 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:44.689 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:44.689 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:44.690 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:44.803 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:0000000F","TimeStamp":"2019-01-26T18:43:44.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:44.803 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:44.803 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:44.803 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:44.803 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:44.808 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:43:44.808 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:43:44.808 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:43:44.808 -08:00 [DBG] Start authorize callback request
2019-01-26 10:43:44.808 -08:00 [DBG] No user present in authorize request
2019-01-26 10:43:44.808 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:44.977 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:44.977 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:45.023 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:45.037 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:45.088 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:45.104 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:45.104 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:45.104 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:43:45.104 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:43:45.123 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:45.385 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:45.385 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:45.453 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:45.476 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:45.541 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:45.562 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:45.562 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:45.780 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:45.780 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:45.782 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:45.918 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:00000012","TimeStamp":"2019-01-26T18:43:45.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:45.919 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:45.919 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:45.919 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:45.919 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:43:45.924 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 10:43:45.924 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 10:43:45.924 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 10:43:45.924 -08:00 [DBG] Start authorize callback request
2019-01-26 10:43:45.924 -08:00 [DBG] No user present in authorize request
2019-01-26 10:43:45.924 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:46.080 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:46.080 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:46.147 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:46.163 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:46.209 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:46.223 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:46.224 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:46.224 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 10:43:46.224 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 10:43:46.243 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 10:43:46.504 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:46.505 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:46.574 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:46.622 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:46.686 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 10:43:46.708 -08:00 [DBG] Found [] API scopes in database
2019-01-26 10:43:46.708 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 10:43:46.920 -08:00 [DBG] angular_spa found in database: true
2019-01-26 10:43:46.920 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 10:43:46.921 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 10:43:47.046 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J70:00000015","TimeStamp":"2019-01-26T18:43:47.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 10:43:47.046 -08:00 [DBG] Augmenting SignInContext
2019-01-26 10:43:47.046 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 10:43:47.046 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 10:43:47.046 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 10:54:30.722 -08:00 [INF] Removing 0 grants
2019-01-26 11:13:47.019 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:49.240 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:49.240 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:49.310 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:49.335 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:49.398 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:49.419 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:49.419 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:49.635 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:49.635 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:49.654 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:49.874 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:49.874 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:49.939 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:49.963 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:50.025 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:50.046 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:50.046 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:50.251 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:50.251 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:50.260 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:50.847 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:00000003","TimeStamp":"2019-01-26T19:13:50.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:50.847 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:50.847 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:50.847 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:50.848 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:13:50.852 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:13:50.853 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:13:50.853 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:13:50.853 -08:00 [DBG] Start authorize callback request
2019-01-26 11:13:50.853 -08:00 [DBG] No user present in authorize request
2019-01-26 11:13:50.853 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:51.023 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:51.023 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:51.085 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:51.100 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:51.142 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:51.158 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:51.158 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:51.158 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:13:51.158 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:13:51.177 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:51.402 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:51.402 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:51.464 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:51.485 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:51.569 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:51.590 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:51.590 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:51.814 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:51.814 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:51.815 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:51.932 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:00000006","TimeStamp":"2019-01-26T19:13:51.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:51.932 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:51.932 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:51.932 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:51.932 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:13:51.937 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:13:51.937 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:13:51.937 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:13:51.937 -08:00 [DBG] Start authorize callback request
2019-01-26 11:13:51.937 -08:00 [DBG] No user present in authorize request
2019-01-26 11:13:51.937 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:52.096 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:52.096 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:52.137 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:52.152 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:52.203 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:52.219 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:52.220 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:52.220 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:13:52.220 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:13:52.246 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:52.466 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:52.466 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:52.528 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:52.550 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:52.613 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:52.634 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:52.634 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:52.859 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:52.859 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:52.860 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:52.971 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:00000009","TimeStamp":"2019-01-26T19:13:52.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:52.972 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:52.972 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:52.972 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:52.972 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:13:52.976 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:13:52.977 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:13:52.977 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:13:52.977 -08:00 [DBG] Start authorize callback request
2019-01-26 11:13:52.977 -08:00 [DBG] No user present in authorize request
2019-01-26 11:13:52.977 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:53.156 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:53.156 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:53.198 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:53.212 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:53.256 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:53.270 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:53.270 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:53.271 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:13:53.271 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:13:53.289 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:53.512 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:53.512 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:53.608 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:53.630 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:53.700 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:53.721 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:53.721 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:53.922 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:53.923 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:53.924 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:54.040 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:0000000C","TimeStamp":"2019-01-26T19:13:54.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:54.040 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:54.040 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:54.040 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:54.040 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:13:54.045 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:13:54.045 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:13:54.045 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:13:54.045 -08:00 [DBG] Start authorize callback request
2019-01-26 11:13:54.045 -08:00 [DBG] No user present in authorize request
2019-01-26 11:13:54.045 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:54.210 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:54.210 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:54.252 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:54.266 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:54.323 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:54.339 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:54.339 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:54.339 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:13:54.339 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:13:54.357 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:54.581 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:54.581 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:54.659 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:54.680 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:54.742 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:54.770 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:54.770 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:54.980 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:54.980 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:54.981 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:55.090 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:0000000F","TimeStamp":"2019-01-26T19:13:55.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:55.090 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:55.091 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:55.091 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:55.091 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:13:55.095 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:13:55.095 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:13:55.095 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:13:55.095 -08:00 [DBG] Start authorize callback request
2019-01-26 11:13:55.095 -08:00 [DBG] No user present in authorize request
2019-01-26 11:13:55.095 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:55.289 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:55.289 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:55.331 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:55.346 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:55.389 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:55.404 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:55.404 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:55.404 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:13:55.404 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:13:55.423 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:55.648 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:55.648 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:55.745 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:55.767 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:55.830 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:55.852 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:55.853 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:56.138 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:56.138 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:56.139 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:56.251 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:00000012","TimeStamp":"2019-01-26T19:13:56.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:56.251 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:56.251 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:56.251 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:56.251 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:13:56.256 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:13:56.256 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:13:56.256 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:13:56.256 -08:00 [DBG] Start authorize callback request
2019-01-26 11:13:56.256 -08:00 [DBG] No user present in authorize request
2019-01-26 11:13:56.256 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:56.420 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:56.420 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:56.464 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:56.477 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:56.540 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:56.555 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:56.555 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:56.556 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:13:56.556 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:13:56.580 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:13:56.791 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:56.791 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:56.853 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:56.875 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:56.939 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:13:56.961 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:13:56.961 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:13:57.161 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:13:57.161 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:13:57.163 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:13:57.272 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J71:00000015","TimeStamp":"2019-01-26T19:13:57.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:13:57.273 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:13:57.273 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:13:57.273 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:13:57.273 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:43:57.262 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:43:59.401 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:43:59.401 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:43:59.468 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:43:59.493 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:43:59.558 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:43:59.583 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:43:59.583 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:43:59.784 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:43:59.784 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:43:59.819 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:00.048 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:00.049 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:00.114 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:00.135 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:00.198 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:00.220 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:00.220 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:00.424 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:00.424 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:00.453 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:01.029 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:00000003","TimeStamp":"2019-01-26T19:44:01.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:01.029 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:01.029 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:01.029 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:01.029 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:44:01.034 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:44:01.034 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:44:01.034 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:44:01.034 -08:00 [DBG] Start authorize callback request
2019-01-26 11:44:01.035 -08:00 [DBG] No user present in authorize request
2019-01-26 11:44:01.035 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:01.190 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:01.190 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:01.233 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:01.247 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:01.291 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:01.305 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:01.305 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:01.305 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:44:01.305 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:44:01.324 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:01.553 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:01.553 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:01.619 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:01.640 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:01.704 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:01.725 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:01.726 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:01.947 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:01.947 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:01.948 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:02.081 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:00000006","TimeStamp":"2019-01-26T19:44:02.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:02.081 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:02.081 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:02.082 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:02.082 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:44:02.086 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:44:02.087 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:44:02.087 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:44:02.087 -08:00 [DBG] Start authorize callback request
2019-01-26 11:44:02.087 -08:00 [DBG] No user present in authorize request
2019-01-26 11:44:02.087 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:02.249 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:02.249 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:02.294 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:02.309 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:02.353 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:02.368 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:02.368 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:02.368 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:44:02.368 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:44:02.387 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:02.606 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:02.606 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:02.668 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:02.690 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:02.758 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:02.779 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:02.780 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:02.977 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:02.978 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:02.979 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:03.109 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:00000009","TimeStamp":"2019-01-26T19:44:03.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:03.110 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:03.110 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:03.110 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:03.110 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:44:03.114 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:44:03.114 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:44:03.114 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:44:03.115 -08:00 [DBG] Start authorize callback request
2019-01-26 11:44:03.115 -08:00 [DBG] No user present in authorize request
2019-01-26 11:44:03.115 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:03.295 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:03.295 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:03.337 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:03.351 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:03.395 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:03.413 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:03.413 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:03.413 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:44:03.413 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:44:03.433 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:03.689 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:03.689 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:03.758 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:03.781 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:03.850 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:03.882 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:03.882 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:04.115 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:04.115 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:04.117 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:04.226 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:0000000C","TimeStamp":"2019-01-26T19:44:04.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:04.227 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:04.227 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:04.227 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:04.227 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:44:04.231 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:44:04.231 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:44:04.232 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:44:04.232 -08:00 [DBG] Start authorize callback request
2019-01-26 11:44:04.232 -08:00 [DBG] No user present in authorize request
2019-01-26 11:44:04.232 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:04.397 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:04.397 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:04.439 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:04.454 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:04.498 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:04.513 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:04.513 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:04.513 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:44:04.513 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:44:04.532 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:04.759 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:04.759 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:04.839 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:04.862 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:04.942 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:04.963 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:04.963 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:05.184 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:05.185 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:05.186 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:05.324 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:0000000F","TimeStamp":"2019-01-26T19:44:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:05.324 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:05.325 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:05.325 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:05.325 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:44:05.333 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:44:05.334 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:44:05.334 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:44:05.334 -08:00 [DBG] Start authorize callback request
2019-01-26 11:44:05.334 -08:00 [DBG] No user present in authorize request
2019-01-26 11:44:05.334 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:05.486 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:05.486 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:05.539 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:05.555 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:05.600 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:05.615 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:05.615 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:05.615 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:44:05.615 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:44:05.635 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:05.901 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:05.901 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:05.964 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:05.989 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:06.055 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:06.077 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:06.077 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:06.286 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:06.286 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:06.288 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:06.441 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:00000012","TimeStamp":"2019-01-26T19:44:06.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:06.441 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:06.441 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:06.441 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:06.441 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:44:06.445 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 11:44:06.446 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 11:44:06.446 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 11:44:06.446 -08:00 [DBG] Start authorize callback request
2019-01-26 11:44:06.446 -08:00 [DBG] No user present in authorize request
2019-01-26 11:44:06.446 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:06.601 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:06.601 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:06.646 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:06.661 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:06.764 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:06.779 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:06.779 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:06.779 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 11:44:06.780 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 11:44:06.799 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 11:44:07.030 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:07.031 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:07.094 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:07.115 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:07.182 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 11:44:07.204 -08:00 [DBG] Found [] API scopes in database
2019-01-26 11:44:07.204 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 11:44:07.435 -08:00 [DBG] angular_spa found in database: true
2019-01-26 11:44:07.435 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 11:44:07.436 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 11:44:07.546 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J72:00000015","TimeStamp":"2019-01-26T19:44:07.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 11:44:07.546 -08:00 [DBG] Augmenting SignInContext
2019-01-26 11:44:07.546 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 11:44:07.546 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 11:44:07.546 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 11:54:32.542 -08:00 [INF] Removing 0 grants
2019-01-26 12:14:07.545 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:09.752 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:09.753 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:09.830 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:09.856 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:09.921 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:09.943 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:09.943 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:10.155 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:10.155 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:10.175 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:10.402 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:10.402 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:10.465 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:10.486 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:10.554 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:10.576 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:10.576 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:10.785 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:10.785 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:10.797 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:11.372 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:00000003","TimeStamp":"2019-01-26T20:14:11.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:11.372 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:11.372 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:11.372 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:11.372 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:14:11.387 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:14:11.388 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:14:11.388 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:14:11.388 -08:00 [DBG] Start authorize callback request
2019-01-26 12:14:11.388 -08:00 [DBG] No user present in authorize request
2019-01-26 12:14:11.388 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:11.548 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:11.548 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:11.591 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:11.606 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:11.655 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:11.671 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:11.671 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:11.671 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:14:11.671 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:14:11.691 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:11.923 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:11.923 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:11.986 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:12.008 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:12.073 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:12.096 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:12.096 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:12.304 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:12.305 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:12.306 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:12.441 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:00000006","TimeStamp":"2019-01-26T20:14:12.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:12.441 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:12.441 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:12.441 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:12.441 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:14:12.449 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:14:12.450 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:14:12.450 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:14:12.450 -08:00 [DBG] Start authorize callback request
2019-01-26 12:14:12.450 -08:00 [DBG] No user present in authorize request
2019-01-26 12:14:12.450 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:12.613 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:12.613 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:12.656 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:12.671 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:12.724 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:12.739 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:12.739 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:12.739 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:14:12.739 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:14:12.768 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:13.003 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:13.003 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:13.074 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:13.097 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:13.163 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:13.189 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:13.189 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:13.402 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:13.403 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:13.404 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:13.545 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:00000009","TimeStamp":"2019-01-26T20:14:13.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:13.545 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:13.545 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:13.545 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:13.545 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:14:13.550 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:14:13.550 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:14:13.550 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:14:13.550 -08:00 [DBG] Start authorize callback request
2019-01-26 12:14:13.550 -08:00 [DBG] No user present in authorize request
2019-01-26 12:14:13.550 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:13.719 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:13.719 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:13.772 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:13.788 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:13.831 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:13.846 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:13.846 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:13.846 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:14:13.846 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:14:13.866 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:14.101 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:14.101 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:14.170 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:14.192 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:14.270 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:14.292 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:14.292 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:14.508 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:14.508 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:14.509 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:14.619 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:0000000C","TimeStamp":"2019-01-26T20:14:14.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:14.619 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:14.619 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:14.619 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:14.619 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:14:14.623 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:14:14.623 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:14:14.624 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:14:14.624 -08:00 [DBG] Start authorize callback request
2019-01-26 12:14:14.624 -08:00 [DBG] No user present in authorize request
2019-01-26 12:14:14.624 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:14.810 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:14.810 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:14.853 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:14.868 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:14.913 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:14.927 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:14.927 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:14.927 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:14:14.928 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:14:14.950 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:15.183 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:15.184 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:15.248 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:15.269 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:15.333 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:15.355 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:15.355 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:15.568 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:15.568 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:15.569 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:15.733 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:0000000F","TimeStamp":"2019-01-26T20:14:15.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:15.733 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:15.733 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:15.733 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:15.733 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:14:15.737 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:14:15.737 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:14:15.737 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:14:15.738 -08:00 [DBG] Start authorize callback request
2019-01-26 12:14:15.738 -08:00 [DBG] No user present in authorize request
2019-01-26 12:14:15.738 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:15.901 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:15.901 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:15.950 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:15.964 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:16.009 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:16.024 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:16.024 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:16.024 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:14:16.024 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:14:16.043 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:16.298 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:16.298 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:16.363 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:16.386 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:16.451 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:16.473 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:16.473 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:16.686 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:16.686 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:16.688 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:16.797 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:00000012","TimeStamp":"2019-01-26T20:14:16.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:16.797 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:16.797 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:16.798 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:16.798 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:14:16.802 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:14:16.803 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:14:16.803 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:14:16.803 -08:00 [DBG] Start authorize callback request
2019-01-26 12:14:16.803 -08:00 [DBG] No user present in authorize request
2019-01-26 12:14:16.803 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:16.970 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:16.970 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:17.012 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:17.026 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:17.070 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:17.091 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:17.091 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:17.091 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:14:17.091 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:14:17.114 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:14:17.371 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:17.371 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:17.435 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:17.455 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:17.520 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:14:17.542 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:14:17.542 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:14:17.777 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:14:17.777 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:14:17.778 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:14:17.899 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J73:00000015","TimeStamp":"2019-01-26T20:14:17.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:14:17.899 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:14:17.899 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:14:17.899 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:14:17.899 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:17.934 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:20.132 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:20.133 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:20.203 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:20.234 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:20.298 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:20.319 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:20.319 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:20.530 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:20.530 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:20.549 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:20.800 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:20.800 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:20.873 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:20.895 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:20.960 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:20.982 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:20.982 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:21.193 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:21.193 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:21.213 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:21.812 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:00000003","TimeStamp":"2019-01-26T20:44:21.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:21.812 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:21.812 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:21.812 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:21.813 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:21.817 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:44:21.818 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:44:21.818 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:44:21.818 -08:00 [DBG] Start authorize callback request
2019-01-26 12:44:21.818 -08:00 [DBG] No user present in authorize request
2019-01-26 12:44:21.818 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:21.979 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:21.979 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:22.021 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:22.036 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:22.079 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:22.094 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:22.094 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:22.094 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:44:22.094 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:44:22.113 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:22.351 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:22.352 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:22.430 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:22.451 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:22.516 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:22.537 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:22.537 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:22.844 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:22.844 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:22.845 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:23.004 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:00000006","TimeStamp":"2019-01-26T20:44:23.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:23.004 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:23.004 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:23.004 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:23.004 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:23.009 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:44:23.009 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:44:23.009 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:44:23.009 -08:00 [DBG] Start authorize callback request
2019-01-26 12:44:23.009 -08:00 [DBG] No user present in authorize request
2019-01-26 12:44:23.009 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:23.237 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:23.238 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:23.279 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:23.293 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:23.336 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:23.351 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:23.351 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:23.351 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:44:23.351 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:44:23.370 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:23.614 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:23.614 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:23.699 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:23.725 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:23.789 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:23.810 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:23.810 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:24.032 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:24.032 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:24.033 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:24.144 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:00000009","TimeStamp":"2019-01-26T20:44:24.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:24.145 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:24.145 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:24.145 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:24.145 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:24.153 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:44:24.153 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:44:24.153 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:44:24.154 -08:00 [DBG] Start authorize callback request
2019-01-26 12:44:24.154 -08:00 [DBG] No user present in authorize request
2019-01-26 12:44:24.154 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:24.307 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:24.307 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:24.354 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:24.369 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:24.421 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:24.450 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:24.450 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:24.450 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:44:24.450 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:44:24.470 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:24.762 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:24.762 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:24.834 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:24.855 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:24.919 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:24.940 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:24.940 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:25.148 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:25.148 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:25.149 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:25.257 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:0000000C","TimeStamp":"2019-01-26T20:44:25.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:25.257 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:25.258 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:25.258 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:25.258 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:25.263 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:44:25.263 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:44:25.263 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:44:25.263 -08:00 [DBG] Start authorize callback request
2019-01-26 12:44:25.263 -08:00 [DBG] No user present in authorize request
2019-01-26 12:44:25.263 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:25.445 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:25.446 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:25.487 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:25.504 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:25.563 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:25.578 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:25.578 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:25.578 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:44:25.578 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:44:25.597 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:25.834 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:25.834 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:25.896 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:25.917 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:25.981 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:26.003 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:26.003 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:26.207 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:26.207 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:26.209 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:26.319 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:0000000F","TimeStamp":"2019-01-26T20:44:26.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:26.320 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:26.320 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:26.320 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:26.320 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:26.325 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:44:26.325 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:44:26.325 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:44:26.325 -08:00 [DBG] Start authorize callback request
2019-01-26 12:44:26.325 -08:00 [DBG] No user present in authorize request
2019-01-26 12:44:26.325 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:26.492 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:26.492 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:26.535 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:26.550 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:26.593 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:26.608 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:26.608 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:26.608 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:44:26.608 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:44:26.627 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:26.905 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:26.905 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:26.970 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:26.991 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:27.054 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:27.075 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:27.076 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:27.285 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:27.285 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:27.287 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:27.404 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:00000012","TimeStamp":"2019-01-26T20:44:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:27.404 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:27.404 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:27.404 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:27.405 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:44:27.409 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 12:44:27.410 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 12:44:27.410 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 12:44:27.410 -08:00 [DBG] Start authorize callback request
2019-01-26 12:44:27.410 -08:00 [DBG] No user present in authorize request
2019-01-26 12:44:27.410 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:27.559 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:27.559 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:27.621 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:27.637 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:27.680 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:27.695 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:27.695 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:27.695 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 12:44:27.695 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 12:44:27.715 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 12:44:27.951 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:27.951 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:28.014 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:28.035 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:28.109 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 12:44:28.131 -08:00 [DBG] Found [] API scopes in database
2019-01-26 12:44:28.131 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 12:44:28.361 -08:00 [DBG] angular_spa found in database: true
2019-01-26 12:44:28.361 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 12:44:28.362 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 12:44:28.484 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J74:00000015","TimeStamp":"2019-01-26T20:44:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 12:44:28.484 -08:00 [DBG] Augmenting SignInContext
2019-01-26 12:44:28.484 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 12:44:28.484 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 12:44:28.484 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 12:54:32.949 -08:00 [INF] Removing 0 grants
2019-01-26 13:14:28.501 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:30.680 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:30.681 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:30.755 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:30.810 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:30.876 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:30.898 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:30.899 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:31.111 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:31.111 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:31.134 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:31.355 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:31.355 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:31.422 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:31.445 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:31.511 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:31.534 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:31.534 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:31.746 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:31.746 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:31.754 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:32.397 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:00000003","TimeStamp":"2019-01-26T21:14:32.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:32.397 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:32.397 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:32.397 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:32.397 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:14:32.402 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:14:32.402 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:14:32.402 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:14:32.403 -08:00 [DBG] Start authorize callback request
2019-01-26 13:14:32.403 -08:00 [DBG] No user present in authorize request
2019-01-26 13:14:32.403 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:32.562 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:32.562 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:32.618 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:32.633 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:32.679 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:32.694 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:32.694 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:32.694 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:14:32.694 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:14:32.714 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:32.971 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:32.972 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:33.039 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:33.061 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:33.127 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:33.149 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:33.149 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:33.362 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:33.362 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:33.363 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:33.469 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:00000006","TimeStamp":"2019-01-26T21:14:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:33.469 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:33.469 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:33.469 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:33.470 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:14:33.474 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:14:33.474 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:14:33.474 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:14:33.475 -08:00 [DBG] Start authorize callback request
2019-01-26 13:14:33.475 -08:00 [DBG] No user present in authorize request
2019-01-26 13:14:33.475 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:33.650 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:33.650 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:33.693 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:33.708 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:33.760 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:33.777 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:33.777 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:33.778 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:14:33.778 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:14:33.797 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:34.038 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:34.038 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:34.104 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:34.126 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:34.192 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:34.214 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:34.215 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:34.421 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:34.421 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:34.423 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:34.532 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:00000009","TimeStamp":"2019-01-26T21:14:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:34.532 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:34.532 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:34.532 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:34.532 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:14:34.537 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:14:34.537 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:14:34.537 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:14:34.537 -08:00 [DBG] Start authorize callback request
2019-01-26 13:14:34.537 -08:00 [DBG] No user present in authorize request
2019-01-26 13:14:34.537 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:34.720 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:34.720 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:34.763 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:34.778 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:34.820 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:34.836 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:34.836 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:34.836 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:14:34.836 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:14:34.856 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:35.104 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:35.104 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:35.194 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:35.226 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:35.449 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:35.481 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:35.481 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:35.769 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:35.769 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:35.770 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:35.879 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:0000000C","TimeStamp":"2019-01-26T21:14:35.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:35.879 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:35.879 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:35.879 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:35.880 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:14:35.890 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:14:35.890 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:14:35.890 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:14:35.890 -08:00 [DBG] Start authorize callback request
2019-01-26 13:14:35.890 -08:00 [DBG] No user present in authorize request
2019-01-26 13:14:35.890 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:36.047 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:36.047 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:36.090 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:36.105 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:36.162 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:36.179 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:36.179 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:36.179 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:14:36.179 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:14:36.198 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:36.434 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:36.434 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:36.499 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:36.520 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:36.617 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:36.644 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:36.644 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:36.868 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:36.868 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:36.870 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:36.989 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:0000000F","TimeStamp":"2019-01-26T21:14:36.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:36.989 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:36.989 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:36.989 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:36.989 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:14:36.993 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:14:36.993 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:14:36.993 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:14:36.993 -08:00 [DBG] Start authorize callback request
2019-01-26 13:14:36.994 -08:00 [DBG] No user present in authorize request
2019-01-26 13:14:36.994 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:37.208 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:37.208 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:37.252 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:37.266 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:37.311 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:37.326 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:37.326 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:37.326 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:14:37.326 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:14:37.346 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:37.577 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:37.577 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:37.650 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:37.672 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:37.747 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:37.769 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:37.769 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:37.975 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:37.975 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:37.976 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:38.109 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:00000012","TimeStamp":"2019-01-26T21:14:38.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:38.109 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:38.109 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:38.109 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:38.109 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:14:38.114 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:14:38.114 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:14:38.114 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:14:38.114 -08:00 [DBG] Start authorize callback request
2019-01-26 13:14:38.114 -08:00 [DBG] No user present in authorize request
2019-01-26 13:14:38.114 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:38.301 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:38.301 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:38.367 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:38.381 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:38.425 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:38.439 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:38.439 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:38.439 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:14:38.440 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:14:38.459 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:14:38.732 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:38.732 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:38.805 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:38.829 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:38.893 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:14:38.915 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:14:38.916 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:14:39.124 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:14:39.124 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:14:39.125 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:14:39.262 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J75:00000015","TimeStamp":"2019-01-26T21:14:39.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:14:39.262 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:14:39.262 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:14:39.263 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:14:39.263 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:39.270 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:41.458 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:41.458 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:41.526 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:41.551 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:41.620 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:41.642 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:41.642 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:41.845 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:41.845 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:41.864 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:42.085 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:42.085 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:42.149 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:42.170 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:42.236 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:42.262 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:42.262 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:42.471 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:42.471 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:42.494 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:43.075 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:00000003","TimeStamp":"2019-01-26T21:44:43.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:43.075 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:43.075 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:43.076 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:43.076 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:43.088 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:44:43.088 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:44:43.088 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:44:43.088 -08:00 [DBG] Start authorize callback request
2019-01-26 13:44:43.088 -08:00 [DBG] No user present in authorize request
2019-01-26 13:44:43.089 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:43.266 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:43.266 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:43.310 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:43.325 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:43.380 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:43.432 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:43.432 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:43.432 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:44:43.432 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:44:43.452 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:43.685 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:43.685 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:43.751 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:43.773 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:43.855 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:43.879 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:43.879 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:44.122 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:44.122 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:44.123 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:44.233 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:00000006","TimeStamp":"2019-01-26T21:44:44.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:44.233 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:44.233 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:44.233 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:44.233 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:44.237 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:44:44.238 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:44:44.238 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:44:44.238 -08:00 [DBG] Start authorize callback request
2019-01-26 13:44:44.238 -08:00 [DBG] No user present in authorize request
2019-01-26 13:44:44.238 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:44.405 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:44.405 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:44.449 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:44.463 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:44.507 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:44.528 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:44.528 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:44.529 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:44:44.529 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:44:44.549 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:44.796 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:44.796 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:44.862 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:44.884 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:44.959 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:44.988 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:44.989 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:45.218 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:45.218 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:45.219 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:45.336 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:00000009","TimeStamp":"2019-01-26T21:44:45.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:45.336 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:45.336 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:45.336 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:45.336 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:45.344 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:44:45.344 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:44:45.345 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:44:45.345 -08:00 [DBG] Start authorize callback request
2019-01-26 13:44:45.345 -08:00 [DBG] No user present in authorize request
2019-01-26 13:44:45.345 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:45.526 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:45.526 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:45.582 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:45.598 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:45.645 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:45.660 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:45.660 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:45.660 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:44:45.660 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:44:45.680 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:45.912 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:45.912 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:45.984 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:46.005 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:46.102 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:46.124 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:46.124 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:46.337 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:46.337 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:46.338 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:46.450 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:0000000C","TimeStamp":"2019-01-26T21:44:46.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:46.451 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:46.451 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:46.451 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:46.451 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:46.455 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:44:46.455 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:44:46.455 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:44:46.456 -08:00 [DBG] Start authorize callback request
2019-01-26 13:44:46.456 -08:00 [DBG] No user present in authorize request
2019-01-26 13:44:46.456 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:46.633 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:46.633 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:46.678 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:46.695 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:46.740 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:46.755 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:46.755 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:46.755 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:44:46.755 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:44:46.775 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:47.138 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:47.138 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:47.234 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:47.266 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:47.353 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:47.376 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:47.376 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:47.588 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:47.588 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:47.589 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:47.720 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:0000000F","TimeStamp":"2019-01-26T21:44:47.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:47.720 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:47.720 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:47.720 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:47.720 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:47.724 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:44:47.725 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:44:47.725 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:44:47.725 -08:00 [DBG] Start authorize callback request
2019-01-26 13:44:47.725 -08:00 [DBG] No user present in authorize request
2019-01-26 13:44:47.725 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:47.921 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:47.921 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:47.965 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:47.980 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:48.030 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:48.046 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:48.046 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:48.047 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:44:48.047 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:44:48.070 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:48.299 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:48.299 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:48.366 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:48.387 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:48.453 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:48.485 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:48.485 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:48.701 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:48.701 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:48.702 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:48.828 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:00000012","TimeStamp":"2019-01-26T21:44:48.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:48.829 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:48.829 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:48.829 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:48.829 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:44:48.833 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 13:44:48.834 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 13:44:48.834 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 13:44:48.834 -08:00 [DBG] Start authorize callback request
2019-01-26 13:44:48.834 -08:00 [DBG] No user present in authorize request
2019-01-26 13:44:48.834 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:49.022 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:49.022 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:49.067 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:49.082 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:49.127 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:49.143 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:49.143 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:49.143 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 13:44:49.143 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 13:44:49.163 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 13:44:49.426 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:49.426 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:49.495 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:49.519 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:49.586 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 13:44:49.608 -08:00 [DBG] Found [] API scopes in database
2019-01-26 13:44:49.608 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 13:44:49.822 -08:00 [DBG] angular_spa found in database: true
2019-01-26 13:44:49.823 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 13:44:49.824 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 13:44:49.965 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J76:00000015","TimeStamp":"2019-01-26T21:44:49.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 13:44:49.965 -08:00 [DBG] Augmenting SignInContext
2019-01-26 13:44:49.965 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 13:44:49.966 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 13:44:49.966 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 13:54:33.375 -08:00 [INF] Removing 0 grants
2019-01-26 14:14:49.984 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:52.186 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:52.187 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:52.258 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:52.284 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:52.350 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:52.372 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:52.372 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:52.578 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:52.578 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:52.603 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:52.831 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:52.831 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:52.897 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:52.919 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:52.984 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:53.006 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:53.006 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:53.232 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:53.232 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:53.342 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:14:53.904 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:00000003","TimeStamp":"2019-01-26T22:14:53.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:14:53.904 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:14:53.904 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:14:53.904 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:14:53.904 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:14:53.918 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:14:53.918 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:14:53.918 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:14:53.918 -08:00 [DBG] Start authorize callback request
2019-01-26 14:14:53.918 -08:00 [DBG] No user present in authorize request
2019-01-26 14:14:53.918 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:54.082 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:54.083 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:54.125 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:54.140 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:54.186 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:54.202 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:54.202 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:54.202 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:14:54.202 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:14:54.249 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:54.470 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:54.471 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:54.544 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:54.566 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:54.631 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:54.653 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:54.653 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:54.876 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:54.876 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:54.878 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:14:54.991 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:00000006","TimeStamp":"2019-01-26T22:14:54.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:14:54.991 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:14:54.991 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:14:54.991 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:14:54.991 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:14:54.996 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:14:54.996 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:14:54.996 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:14:54.996 -08:00 [DBG] Start authorize callback request
2019-01-26 14:14:54.996 -08:00 [DBG] No user present in authorize request
2019-01-26 14:14:54.996 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:55.155 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:55.155 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:55.199 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:55.215 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:55.258 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:55.276 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:55.276 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:55.277 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:14:55.277 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:14:55.295 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:55.538 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:55.538 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:55.610 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:55.633 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:55.696 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:55.720 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:55.720 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:55.952 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:55.952 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:55.953 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:14:56.084 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:00000009","TimeStamp":"2019-01-26T22:14:56.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:14:56.084 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:14:56.084 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:14:56.085 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:14:56.085 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:14:56.089 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:14:56.090 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:14:56.090 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:14:56.090 -08:00 [DBG] Start authorize callback request
2019-01-26 14:14:56.090 -08:00 [DBG] No user present in authorize request
2019-01-26 14:14:56.090 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:56.314 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:56.315 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:56.376 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:56.393 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:56.445 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:56.460 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:56.460 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:56.461 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:14:56.461 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:14:56.480 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:56.713 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:56.713 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:56.778 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:56.799 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:56.868 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:56.890 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:56.890 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:57.095 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:57.095 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:57.096 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:14:57.206 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:0000000C","TimeStamp":"2019-01-26T22:14:57.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:14:57.206 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:14:57.206 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:14:57.206 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:14:57.206 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:14:57.210 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:14:57.211 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:14:57.211 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:14:57.211 -08:00 [DBG] Start authorize callback request
2019-01-26 14:14:57.211 -08:00 [DBG] No user present in authorize request
2019-01-26 14:14:57.211 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:57.378 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:57.378 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:57.420 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:57.436 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:57.487 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:57.512 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:57.512 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:57.512 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:14:57.512 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:14:57.532 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:57.760 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:57.760 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:57.847 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:57.869 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:57.953 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:57.976 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:57.976 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:58.186 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:58.186 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:58.188 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:14:58.301 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:0000000F","TimeStamp":"2019-01-26T22:14:58.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:14:58.301 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:14:58.301 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:14:58.301 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:14:58.301 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:14:58.306 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:14:58.306 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:14:58.306 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:14:58.306 -08:00 [DBG] Start authorize callback request
2019-01-26 14:14:58.306 -08:00 [DBG] No user present in authorize request
2019-01-26 14:14:58.306 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:58.504 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:58.504 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:58.547 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:58.563 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:58.608 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:58.623 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:58.623 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:58.623 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:14:58.623 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:14:58.643 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:58.879 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:58.879 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:58.958 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:58.980 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:59.045 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:59.067 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:59.068 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:59.278 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:59.278 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:59.280 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:14:59.431 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:00000012","TimeStamp":"2019-01-26T22:14:59.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:14:59.431 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:14:59.431 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:14:59.431 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:14:59.432 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:14:59.436 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:14:59.436 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:14:59.436 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:14:59.436 -08:00 [DBG] Start authorize callback request
2019-01-26 14:14:59.436 -08:00 [DBG] No user present in authorize request
2019-01-26 14:14:59.437 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:14:59.622 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:14:59.623 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:14:59.718 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:59.750 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:59.846 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:14:59.878 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:14:59.878 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:14:59.878 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:14:59.878 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:14:59.909 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:15:00.214 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:15:00.214 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:15:00.280 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:15:00.302 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:15:00.390 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:15:00.413 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:15:00.413 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:15:00.641 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:15:00.642 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:15:00.643 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:15:00.753 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J77:00000015","TimeStamp":"2019-01-26T22:15:00.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:15:00.753 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:15:00.753 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:15:00.753 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:15:00.754 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:00.778 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:02.963 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:02.963 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:03.032 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:03.057 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:03.121 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:03.155 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:03.155 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:03.358 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:03.358 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:03.379 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:03.627 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:03.627 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:03.699 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:03.721 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:03.785 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:03.815 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:03.815 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:04.019 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:04.019 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:04.027 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:04.665 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:00000003","TimeStamp":"2019-01-26T22:45:04.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:04.665 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:04.665 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:04.665 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:04.665 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:04.669 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:45:04.670 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:45:04.670 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:45:04.670 -08:00 [DBG] Start authorize callback request
2019-01-26 14:45:04.670 -08:00 [DBG] No user present in authorize request
2019-01-26 14:45:04.670 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:04.847 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:04.847 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:04.890 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:04.905 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:04.948 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:04.963 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:04.964 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:04.964 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:45:04.964 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:45:04.983 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:05.229 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:05.229 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:05.296 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:05.318 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:05.387 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:05.408 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:05.408 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:05.619 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:05.619 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:05.620 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:05.734 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:00000006","TimeStamp":"2019-01-26T22:45:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:05.734 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:05.734 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:05.735 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:05.735 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:05.739 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:45:05.739 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:45:05.739 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:45:05.740 -08:00 [DBG] Start authorize callback request
2019-01-26 14:45:05.740 -08:00 [DBG] No user present in authorize request
2019-01-26 14:45:05.740 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:05.890 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:05.890 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:05.942 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:05.963 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:06.009 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:06.024 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:06.024 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:06.024 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:45:06.024 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:45:06.043 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:06.263 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:06.264 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:06.326 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:06.346 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:06.413 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:06.434 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:06.435 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:06.662 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:06.662 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:06.663 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:06.777 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:00000009","TimeStamp":"2019-01-26T22:45:06.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:06.777 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:06.777 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:06.777 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:06.777 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:06.781 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:45:06.782 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:45:06.782 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:45:06.782 -08:00 [DBG] Start authorize callback request
2019-01-26 14:45:06.782 -08:00 [DBG] No user present in authorize request
2019-01-26 14:45:06.782 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:06.947 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:06.948 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:06.990 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:07.005 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:07.048 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:07.064 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:07.064 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:07.064 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:45:07.064 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:45:07.083 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:07.336 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:07.336 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:07.405 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:07.426 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:07.490 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:07.521 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:07.521 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:07.737 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:07.737 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:07.739 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:07.855 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:0000000C","TimeStamp":"2019-01-26T22:45:07.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:07.855 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:07.855 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:07.855 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:07.855 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:07.859 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:45:07.860 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:45:07.860 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:45:07.860 -08:00 [DBG] Start authorize callback request
2019-01-26 14:45:07.860 -08:00 [DBG] No user present in authorize request
2019-01-26 14:45:07.860 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:08.048 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:08.048 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:08.091 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:08.114 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:08.158 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:08.174 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:08.174 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:08.174 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:45:08.174 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:45:08.194 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:08.441 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:08.441 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:08.505 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:08.527 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:08.594 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:08.616 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:08.616 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:08.821 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:08.821 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:08.822 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:08.933 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:0000000F","TimeStamp":"2019-01-26T22:45:08.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:08.933 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:08.933 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:08.933 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:08.933 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:08.937 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:45:08.937 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:45:08.937 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:45:08.938 -08:00 [DBG] Start authorize callback request
2019-01-26 14:45:08.938 -08:00 [DBG] No user present in authorize request
2019-01-26 14:45:08.938 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:09.108 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:09.108 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:09.152 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:09.167 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:09.212 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:09.226 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:09.227 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:09.227 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:45:09.227 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:45:09.246 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:09.536 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:09.537 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:09.601 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:09.623 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:09.686 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:09.717 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:09.717 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:09.924 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:09.924 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:09.925 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:10.038 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:00000012","TimeStamp":"2019-01-26T22:45:10.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:10.038 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:10.038 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:10.039 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:10.039 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:45:10.043 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 14:45:10.043 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 14:45:10.044 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 14:45:10.044 -08:00 [DBG] Start authorize callback request
2019-01-26 14:45:10.044 -08:00 [DBG] No user present in authorize request
2019-01-26 14:45:10.044 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:10.217 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:10.217 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:10.263 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:10.278 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:10.322 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:10.337 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:10.337 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:10.337 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 14:45:10.337 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 14:45:10.356 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 14:45:10.591 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:10.592 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:10.655 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:10.685 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:10.752 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 14:45:10.775 -08:00 [DBG] Found [] API scopes in database
2019-01-26 14:45:10.775 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 14:45:11.006 -08:00 [DBG] angular_spa found in database: true
2019-01-26 14:45:11.006 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 14:45:11.007 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 14:45:11.127 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J78:00000015","TimeStamp":"2019-01-26T22:45:11.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 14:45:11.127 -08:00 [DBG] Augmenting SignInContext
2019-01-26 14:45:11.128 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 14:45:11.128 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 14:45:11.128 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 14:54:33.797 -08:00 [INF] Removing 0 grants
2019-01-26 15:15:11.171 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:13.263 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:13.264 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:13.334 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:13.390 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:13.610 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:13.641 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:13.642 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:13.961 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:13.961 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:14.024 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:14.283 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:14.283 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:14.344 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:14.386 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:14.452 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:14.473 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:14.473 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:14.678 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:14.678 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:14.686 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:15.275 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:00000003","TimeStamp":"2019-01-26T23:15:15.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:15.275 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:15.275 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:15.275 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:15.275 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:15:15.280 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:15:15.281 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:15:15.281 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:15:15.281 -08:00 [DBG] Start authorize callback request
2019-01-26 15:15:15.281 -08:00 [DBG] No user present in authorize request
2019-01-26 15:15:15.281 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:15.452 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:15.452 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:15.498 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:15.513 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:15.572 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:15.587 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:15.587 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:15.587 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:15:15.587 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:15:15.608 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:15.876 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:15.876 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:15.939 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:15.967 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:16.038 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:16.060 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:16.060 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:16.270 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:16.270 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:16.271 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:16.383 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:00000006","TimeStamp":"2019-01-26T23:15:16.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:16.383 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:16.383 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:16.383 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:16.383 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:15:16.388 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:15:16.388 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:15:16.388 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:15:16.388 -08:00 [DBG] Start authorize callback request
2019-01-26 15:15:16.388 -08:00 [DBG] No user present in authorize request
2019-01-26 15:15:16.388 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:16.579 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:16.579 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:16.621 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:16.635 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:16.689 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:16.704 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:16.704 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:16.704 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:15:16.704 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:15:16.730 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:16.986 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:16.986 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:17.059 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:17.083 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:17.148 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:17.170 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:17.170 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:17.391 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:17.391 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:17.392 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:17.516 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:00000009","TimeStamp":"2019-01-26T23:15:17.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:17.516 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:17.516 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:17.517 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:17.517 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:15:17.521 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:15:17.521 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:15:17.522 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:15:17.522 -08:00 [DBG] Start authorize callback request
2019-01-26 15:15:17.522 -08:00 [DBG] No user present in authorize request
2019-01-26 15:15:17.522 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:17.726 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:17.726 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:17.774 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:17.789 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:17.835 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:17.858 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:17.858 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:17.858 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:15:17.858 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:15:17.878 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:18.116 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:18.116 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:18.231 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:18.284 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:18.358 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:18.397 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:18.397 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:18.667 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:18.667 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:18.668 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:18.783 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:0000000C","TimeStamp":"2019-01-26T23:15:18.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:18.783 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:18.783 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:18.783 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:18.784 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:15:18.789 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:15:18.789 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:15:18.789 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:15:18.789 -08:00 [DBG] Start authorize callback request
2019-01-26 15:15:18.789 -08:00 [DBG] No user present in authorize request
2019-01-26 15:15:18.789 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:19.012 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:19.012 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:19.053 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:19.067 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:19.149 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:19.165 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:19.165 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:19.165 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:15:19.165 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:15:19.183 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:19.409 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:19.409 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:19.472 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:19.493 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:19.558 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:19.580 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:19.580 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:19.806 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:19.806 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:19.808 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:19.934 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:0000000F","TimeStamp":"2019-01-26T23:15:19.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:19.935 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:19.935 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:19.935 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:19.935 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:15:19.939 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:15:19.940 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:15:19.940 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:15:19.940 -08:00 [DBG] Start authorize callback request
2019-01-26 15:15:19.940 -08:00 [DBG] No user present in authorize request
2019-01-26 15:15:19.940 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:20.133 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:20.133 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:20.178 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:20.192 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:20.235 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:20.251 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:20.251 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:20.251 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:15:20.251 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:15:20.269 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:20.515 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:20.515 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:20.580 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:20.602 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:20.668 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:20.704 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:20.705 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:20.929 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:20.929 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:20.930 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:21.041 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:00000012","TimeStamp":"2019-01-26T23:15:21.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:21.041 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:21.041 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:21.041 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:21.041 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:15:21.046 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:15:21.046 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:15:21.046 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:15:21.046 -08:00 [DBG] Start authorize callback request
2019-01-26 15:15:21.046 -08:00 [DBG] No user present in authorize request
2019-01-26 15:15:21.046 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:21.250 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:21.250 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:21.292 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:21.307 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:21.360 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:21.376 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:21.377 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:21.377 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:15:21.377 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:15:21.397 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:15:21.628 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:21.628 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:21.693 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:21.714 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:21.790 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:15:21.811 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:15:21.811 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:15:22.033 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:15:22.033 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:15:22.034 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:15:22.164 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J79:00000015","TimeStamp":"2019-01-26T23:15:22.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:15:22.164 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:15:22.164 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:15:22.164 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:15:22.164 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:22.198 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:24.290 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:24.290 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:24.358 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:24.394 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:24.460 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:24.481 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:24.481 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:24.693 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:24.693 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:24.719 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:24.961 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:24.961 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:25.026 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:25.047 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:25.116 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:25.148 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:25.149 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:25.366 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:25.366 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:25.374 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:25.986 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:00000003","TimeStamp":"2019-01-26T23:45:25.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:25.987 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:25.987 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:25.987 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:25.987 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:25.992 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:45:25.992 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:45:25.992 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:45:25.992 -08:00 [DBG] Start authorize callback request
2019-01-26 15:45:25.992 -08:00 [DBG] No user present in authorize request
2019-01-26 15:45:25.992 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:26.155 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:26.156 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:26.198 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:26.214 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:26.282 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:26.297 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:26.298 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:26.298 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:45:26.298 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:45:26.316 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:26.550 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:26.550 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:26.613 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:26.635 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:26.699 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:26.727 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:26.727 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:26.980 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:26.980 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:26.981 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:27.140 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:00000006","TimeStamp":"2019-01-26T23:45:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:27.141 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:27.141 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:27.141 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:27.141 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:27.146 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:45:27.146 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:45:27.146 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:45:27.146 -08:00 [DBG] Start authorize callback request
2019-01-26 15:45:27.146 -08:00 [DBG] No user present in authorize request
2019-01-26 15:45:27.146 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:27.523 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:27.523 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:27.618 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:27.663 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:27.719 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:27.734 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:27.734 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:27.734 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:45:27.734 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:45:27.755 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:27.998 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:27.998 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:28.086 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:28.106 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:28.169 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:28.191 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:28.191 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:28.390 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:28.390 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:28.392 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:28.513 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:00000009","TimeStamp":"2019-01-26T23:45:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:28.513 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:28.513 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:28.513 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:28.513 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:28.517 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:45:28.518 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:45:28.518 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:45:28.518 -08:00 [DBG] Start authorize callback request
2019-01-26 15:45:28.518 -08:00 [DBG] No user present in authorize request
2019-01-26 15:45:28.518 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:28.721 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:28.721 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:28.764 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:28.784 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:28.829 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:28.844 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:28.844 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:28.845 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:45:28.845 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:45:28.867 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:29.132 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:29.132 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:29.207 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:29.228 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:29.292 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:29.313 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:29.314 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:29.530 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:29.530 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:29.531 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:29.653 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:0000000C","TimeStamp":"2019-01-26T23:45:29.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:29.653 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:29.653 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:29.653 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:29.653 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:29.658 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:45:29.658 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:45:29.658 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:45:29.658 -08:00 [DBG] Start authorize callback request
2019-01-26 15:45:29.658 -08:00 [DBG] No user present in authorize request
2019-01-26 15:45:29.658 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:29.815 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:29.815 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:29.858 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:29.887 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:29.939 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:29.954 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:29.954 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:29.954 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:45:29.955 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:45:29.974 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:30.198 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:30.198 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:30.261 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:30.283 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:30.347 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:30.369 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:30.369 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:30.583 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:30.583 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:30.584 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:30.715 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:0000000F","TimeStamp":"2019-01-26T23:45:30.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:30.715 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:30.715 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:30.715 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:30.715 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:30.720 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:45:30.721 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:45:30.721 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:45:30.721 -08:00 [DBG] Start authorize callback request
2019-01-26 15:45:30.721 -08:00 [DBG] No user present in authorize request
2019-01-26 15:45:30.721 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:30.933 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:30.933 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:30.976 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:30.991 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:31.036 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:31.050 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:31.050 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:31.050 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:45:31.051 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:45:31.070 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:31.302 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:31.302 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:31.383 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:31.404 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:31.469 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:31.491 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:31.491 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:31.718 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:31.718 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:31.719 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:31.869 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:00000012","TimeStamp":"2019-01-26T23:45:31.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:31.869 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:31.870 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:31.870 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:31.870 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:45:31.874 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 15:45:31.875 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 15:45:31.875 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 15:45:31.875 -08:00 [DBG] Start authorize callback request
2019-01-26 15:45:31.875 -08:00 [DBG] No user present in authorize request
2019-01-26 15:45:31.875 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:32.049 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:32.049 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:32.124 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:32.142 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:32.188 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:32.203 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:32.203 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:32.203 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 15:45:32.203 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 15:45:32.223 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 15:45:32.458 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:32.458 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:32.523 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:32.545 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:32.633 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 15:45:32.655 -08:00 [DBG] Found [] API scopes in database
2019-01-26 15:45:32.655 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 15:45:32.891 -08:00 [DBG] angular_spa found in database: true
2019-01-26 15:45:32.891 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 15:45:32.892 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 15:45:33.002 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7A:00000015","TimeStamp":"2019-01-26T23:45:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 15:45:33.002 -08:00 [DBG] Augmenting SignInContext
2019-01-26 15:45:33.002 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 15:45:33.002 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 15:45:33.002 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 15:54:34.236 -08:00 [INF] Removing 0 grants
2019-01-26 16:15:33.026 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:35.280 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:35.280 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:35.353 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:35.379 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:35.455 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:35.477 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:35.477 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:35.682 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:35.683 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:35.710 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:35.948 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:35.948 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:36.014 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:36.035 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:36.098 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:36.120 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:36.120 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:36.340 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:36.340 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:36.360 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:36.930 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:00000003","TimeStamp":"2019-01-27T00:15:36.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:36.930 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:36.930 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:36.930 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:36.930 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:15:36.938 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:15:36.938 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:15:36.938 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:15:36.938 -08:00 [DBG] Start authorize callback request
2019-01-26 16:15:36.938 -08:00 [DBG] No user present in authorize request
2019-01-26 16:15:36.939 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:37.099 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:37.099 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:37.144 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:37.158 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:37.200 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:37.215 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:37.215 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:37.215 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:15:37.215 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:15:37.234 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:37.478 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:37.479 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:37.541 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:37.567 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:37.636 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:37.657 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:37.657 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:37.861 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:37.861 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:37.862 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:37.975 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:00000006","TimeStamp":"2019-01-27T00:15:37.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:37.975 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:37.975 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:37.975 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:37.975 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:15:37.980 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:15:37.980 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:15:37.980 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:15:37.980 -08:00 [DBG] Start authorize callback request
2019-01-26 16:15:37.980 -08:00 [DBG] No user present in authorize request
2019-01-26 16:15:37.980 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:38.167 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:38.167 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:38.210 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:38.224 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:38.267 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:38.281 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:38.282 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:38.282 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:15:38.282 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:15:38.302 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:38.520 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:38.520 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:38.591 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:38.612 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:38.677 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:38.706 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:38.706 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:38.941 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:38.941 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:38.943 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:39.088 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:00000009","TimeStamp":"2019-01-27T00:15:39.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:39.089 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:39.089 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:39.089 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:39.089 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:15:39.093 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:15:39.094 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:15:39.094 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:15:39.094 -08:00 [DBG] Start authorize callback request
2019-01-26 16:15:39.094 -08:00 [DBG] No user present in authorize request
2019-01-26 16:15:39.094 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:39.240 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:39.240 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:39.310 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:39.324 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:39.368 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:39.382 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:39.383 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:39.383 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:15:39.383 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:15:39.401 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:39.662 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:39.662 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:39.724 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:39.744 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:39.822 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:39.843 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:39.843 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:40.069 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:40.069 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:40.070 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:40.293 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:0000000C","TimeStamp":"2019-01-27T00:15:40.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:40.293 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:40.294 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:40.294 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:40.294 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:15:40.298 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:15:40.299 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:15:40.299 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:15:40.299 -08:00 [DBG] Start authorize callback request
2019-01-26 16:15:40.299 -08:00 [DBG] No user present in authorize request
2019-01-26 16:15:40.299 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:40.747 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:40.747 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:40.834 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:40.849 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:40.893 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:40.908 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:40.908 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:40.908 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:15:40.908 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:15:40.927 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:41.175 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:41.175 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:41.243 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:41.266 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:41.330 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:41.352 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:41.352 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:41.560 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:41.560 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:41.562 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:41.671 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:0000000F","TimeStamp":"2019-01-27T00:15:41.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:41.671 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:41.671 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:41.671 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:41.671 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:15:41.676 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:15:41.676 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:15:41.676 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:15:41.676 -08:00 [DBG] Start authorize callback request
2019-01-26 16:15:41.677 -08:00 [DBG] No user present in authorize request
2019-01-26 16:15:41.677 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:41.881 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:41.881 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:41.924 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:41.939 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:42.001 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:42.016 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:42.016 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:42.017 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:15:42.017 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:15:42.036 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:42.292 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:42.292 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:42.360 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:42.382 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:42.446 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:42.471 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:42.471 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:42.687 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:42.687 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:42.688 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:42.806 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:00000012","TimeStamp":"2019-01-27T00:15:42.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:42.806 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:42.806 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:42.807 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:42.807 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:15:42.811 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:15:42.811 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:15:42.812 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:15:42.812 -08:00 [DBG] Start authorize callback request
2019-01-26 16:15:42.812 -08:00 [DBG] No user present in authorize request
2019-01-26 16:15:42.812 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:43.003 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:43.003 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:43.048 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:43.063 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:43.107 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:43.122 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:43.122 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:43.122 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:15:43.122 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:15:43.141 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:15:43.388 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:43.388 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:43.450 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:43.475 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:43.541 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:15:43.571 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:15:43.571 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:15:43.800 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:15:43.800 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:15:43.801 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:15:43.936 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7B:00000015","TimeStamp":"2019-01-27T00:15:43.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:15:43.936 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:15:43.936 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:15:43.936 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:15:43.936 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:43.964 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:46.214 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:46.214 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:46.283 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:46.314 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:46.379 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:46.401 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:46.401 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:46.610 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:46.610 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:46.629 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:46.867 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:46.867 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:46.929 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:46.950 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:47.029 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:47.051 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:47.051 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:47.259 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:47.259 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:47.267 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:47.863 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:00000003","TimeStamp":"2019-01-27T00:45:47.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:47.864 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:47.864 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:47.864 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:47.864 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:47.868 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:45:47.869 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:45:47.869 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:45:47.869 -08:00 [DBG] Start authorize callback request
2019-01-26 16:45:47.869 -08:00 [DBG] No user present in authorize request
2019-01-26 16:45:47.869 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:48.031 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:48.031 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:48.074 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:48.089 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:48.130 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:48.159 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:48.159 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:48.160 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:45:48.160 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:45:48.192 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:48.443 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:48.443 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:48.506 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:48.533 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:48.597 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:48.628 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:48.628 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:48.846 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:48.846 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:48.847 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:48.962 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:00000006","TimeStamp":"2019-01-27T00:45:48.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:48.963 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:48.963 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:48.963 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:48.963 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:48.970 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:45:48.970 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:45:48.970 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:45:48.970 -08:00 [DBG] Start authorize callback request
2019-01-26 16:45:48.971 -08:00 [DBG] No user present in authorize request
2019-01-26 16:45:48.971 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:49.151 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:49.151 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:49.194 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:49.209 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:49.252 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:49.267 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:49.267 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:49.267 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:45:49.267 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:45:49.285 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:49.506 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:49.506 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:49.574 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:49.595 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:49.664 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:49.686 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:49.686 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:49.919 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:49.920 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:49.921 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:50.029 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:00000009","TimeStamp":"2019-01-27T00:45:50.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:50.029 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:50.029 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:50.030 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:50.030 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:50.034 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:45:50.034 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:45:50.034 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:45:50.034 -08:00 [DBG] Start authorize callback request
2019-01-26 16:45:50.034 -08:00 [DBG] No user present in authorize request
2019-01-26 16:45:50.034 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:50.212 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:50.212 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:50.254 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:50.269 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:50.327 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:50.344 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:50.344 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:50.344 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:45:50.344 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:45:50.363 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:50.587 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:50.588 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:50.657 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:50.678 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:50.742 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:50.763 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:50.763 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:50.973 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:50.973 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:50.974 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:51.089 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:0000000C","TimeStamp":"2019-01-27T00:45:51.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:51.090 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:51.090 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:51.090 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:51.090 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:51.094 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:45:51.095 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:45:51.095 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:45:51.095 -08:00 [DBG] Start authorize callback request
2019-01-26 16:45:51.095 -08:00 [DBG] No user present in authorize request
2019-01-26 16:45:51.095 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:51.259 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:51.259 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:51.315 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:51.329 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:51.373 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:51.387 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:51.387 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:51.387 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:45:51.387 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:45:51.406 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:51.654 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:51.654 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:51.716 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:51.737 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:51.808 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:51.829 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:51.829 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:52.050 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:52.051 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:52.052 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:52.160 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:0000000F","TimeStamp":"2019-01-27T00:45:52.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:52.160 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:52.160 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:52.160 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:52.160 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:52.165 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:45:52.165 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:45:52.165 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:45:52.165 -08:00 [DBG] Start authorize callback request
2019-01-26 16:45:52.165 -08:00 [DBG] No user present in authorize request
2019-01-26 16:45:52.165 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:52.358 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:52.358 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:52.400 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:52.420 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:52.497 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:52.514 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:52.515 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:52.515 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:45:52.515 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:45:52.535 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:52.776 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:52.776 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:52.840 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:52.861 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:52.924 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:52.946 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:52.946 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:53.342 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:53.342 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:53.343 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:53.502 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:00000012","TimeStamp":"2019-01-27T00:45:53.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:53.502 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:53.502 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:53.502 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:53.502 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:45:53.507 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 16:45:53.507 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 16:45:53.507 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 16:45:53.507 -08:00 [DBG] Start authorize callback request
2019-01-26 16:45:53.508 -08:00 [DBG] No user present in authorize request
2019-01-26 16:45:53.508 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:53.755 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:53.756 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:53.798 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:53.813 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:53.856 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:53.897 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:53.898 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:53.898 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 16:45:53.898 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 16:45:53.918 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 16:45:54.164 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:54.164 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:54.228 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:54.251 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:54.314 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 16:45:54.341 -08:00 [DBG] Found [] API scopes in database
2019-01-26 16:45:54.341 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 16:45:54.558 -08:00 [DBG] angular_spa found in database: true
2019-01-26 16:45:54.558 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 16:45:54.559 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 16:45:54.684 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7C:00000015","TimeStamp":"2019-01-27T00:45:54.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 16:45:54.684 -08:00 [DBG] Augmenting SignInContext
2019-01-26 16:45:54.684 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 16:45:54.684 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 16:45:54.684 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 16:54:34.666 -08:00 [INF] Removing 0 grants
2019-01-26 17:15:54.707 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:15:56.974 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:56.974 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:57.051 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:57.105 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:57.170 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:57.191 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:57.191 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:15:57.397 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:57.397 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:57.422 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:15:57.649 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:57.649 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:57.710 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:57.732 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:57.809 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:57.831 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:57.831 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:15:58.045 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:58.045 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:58.170 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:15:58.783 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:00000003","TimeStamp":"2019-01-27T01:15:58.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:15:58.783 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:15:58.783 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:15:58.783 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:15:58.783 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:15:58.788 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:15:58.788 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:15:58.788 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:15:58.788 -08:00 [DBG] Start authorize callback request
2019-01-26 17:15:58.788 -08:00 [DBG] No user present in authorize request
2019-01-26 17:15:58.788 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:15:58.957 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:58.957 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:58.999 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:59.015 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:59.059 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:59.074 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:59.074 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:15:59.074 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:15:59.074 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:15:59.093 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:15:59.331 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:59.331 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:59.397 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:59.418 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:59.487 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:15:59.509 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:15:59.509 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:15:59.711 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:59.711 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:15:59.713 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:15:59.829 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:00000006","TimeStamp":"2019-01-27T01:15:59.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:15:59.829 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:15:59.829 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:15:59.829 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:15:59.830 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:15:59.834 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:15:59.834 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:15:59.834 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:15:59.835 -08:00 [DBG] Start authorize callback request
2019-01-26 17:15:59.835 -08:00 [DBG] No user present in authorize request
2019-01-26 17:15:59.835 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:15:59.991 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:15:59.991 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:00.041 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:00.059 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:00.103 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:00.117 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:00.117 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:00.118 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:16:00.118 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:16:00.138 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:00.386 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:00.387 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:00.449 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:00.470 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:00.540 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:00.561 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:00.561 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:00.772 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:00.772 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:00.773 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:16:00.881 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:00000009","TimeStamp":"2019-01-27T01:16:00.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:16:00.881 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:16:00.882 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:16:00.882 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:16:00.882 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:16:00.887 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:16:00.887 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:16:00.887 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:16:00.887 -08:00 [DBG] Start authorize callback request
2019-01-26 17:16:00.887 -08:00 [DBG] No user present in authorize request
2019-01-26 17:16:00.887 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:01.060 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:01.060 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:01.104 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:01.118 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:01.161 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:01.177 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:01.177 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:01.177 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:16:01.177 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:16:01.199 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:01.430 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:01.431 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:01.495 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:01.516 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:01.580 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:01.602 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:01.602 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:01.805 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:01.805 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:01.807 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:16:01.946 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:0000000C","TimeStamp":"2019-01-27T01:16:01.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:16:01.946 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:16:01.946 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:16:01.946 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:16:01.946 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:16:01.950 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:16:01.951 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:16:01.951 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:16:01.951 -08:00 [DBG] Start authorize callback request
2019-01-26 17:16:01.951 -08:00 [DBG] No user present in authorize request
2019-01-26 17:16:01.951 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:02.124 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:02.124 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:02.168 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:02.183 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:02.226 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:02.240 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:02.241 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:02.241 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:16:02.241 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:16:02.260 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:02.502 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:02.503 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:02.573 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:02.594 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:02.658 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:02.680 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:02.680 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:02.882 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:02.882 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:02.883 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:16:03.001 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:0000000F","TimeStamp":"2019-01-27T01:16:03.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:16:03.002 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:16:03.002 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:16:03.002 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:16:03.002 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:16:03.007 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:16:03.007 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:16:03.007 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:16:03.007 -08:00 [DBG] Start authorize callback request
2019-01-26 17:16:03.007 -08:00 [DBG] No user present in authorize request
2019-01-26 17:16:03.007 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:03.158 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:03.158 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:03.219 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:03.237 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:03.281 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:03.295 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:03.296 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:03.296 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:16:03.296 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:16:03.314 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:03.567 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:03.567 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:03.630 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:03.651 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:03.726 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:03.748 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:03.748 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:03.969 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:03.969 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:03.970 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:16:04.080 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:00000012","TimeStamp":"2019-01-27T01:16:04.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:16:04.080 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:16:04.080 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:16:04.080 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:16:04.080 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:16:04.085 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:16:04.085 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:16:04.085 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:16:04.085 -08:00 [DBG] Start authorize callback request
2019-01-26 17:16:04.085 -08:00 [DBG] No user present in authorize request
2019-01-26 17:16:04.085 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:04.402 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:04.402 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:04.498 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:04.529 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:04.615 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:04.629 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:04.630 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:04.630 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:16:04.630 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:16:04.650 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:16:04.877 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:04.877 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:04.949 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:04.970 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:05.065 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:16:05.087 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:16:05.087 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:16:05.324 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:16:05.324 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:16:05.325 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:16:05.435 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7D:00000015","TimeStamp":"2019-01-27T01:16:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:16:05.436 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:16:05.436 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:16:05.436 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:16:05.436 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:05.468 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:07.720 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:07.720 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:07.795 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:07.820 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:07.883 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:07.904 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:07.904 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:08.116 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:08.119 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:08.143 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:08.396 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:08.396 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:08.460 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:08.492 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:08.588 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:08.609 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:08.610 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:08.821 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:08.821 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:08.841 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:09.425 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:00000003","TimeStamp":"2019-01-27T01:46:09.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:09.425 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:09.425 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:09.425 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:09.425 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:09.433 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:46:09.433 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:46:09.433 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:46:09.433 -08:00 [DBG] Start authorize callback request
2019-01-26 17:46:09.433 -08:00 [DBG] No user present in authorize request
2019-01-26 17:46:09.433 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:09.605 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:09.605 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:09.648 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:09.663 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:09.709 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:09.726 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:09.726 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:09.726 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:46:09.726 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:46:09.773 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:10.028 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:10.028 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:10.091 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:10.111 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:10.186 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:10.208 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:10.209 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:10.408 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:10.408 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:10.409 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:10.516 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:00000006","TimeStamp":"2019-01-27T01:46:10.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:10.516 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:10.516 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:10.517 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:10.517 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:10.521 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:46:10.522 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:46:10.522 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:46:10.522 -08:00 [DBG] Start authorize callback request
2019-01-26 17:46:10.522 -08:00 [DBG] No user present in authorize request
2019-01-26 17:46:10.522 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:10.714 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:10.714 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:10.756 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:10.770 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:10.814 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:10.829 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:10.829 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:10.829 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:46:10.829 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:46:10.847 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:11.085 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:11.085 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:11.157 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:11.179 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:11.241 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:11.267 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:11.267 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:11.523 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:11.523 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:11.524 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:11.644 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:00000009","TimeStamp":"2019-01-27T01:46:11.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:11.644 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:11.644 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:11.644 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:11.644 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:11.649 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:46:11.649 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:46:11.649 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:46:11.649 -08:00 [DBG] Start authorize callback request
2019-01-26 17:46:11.649 -08:00 [DBG] No user present in authorize request
2019-01-26 17:46:11.649 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:11.799 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:11.799 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:11.878 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:11.908 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:11.954 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:11.968 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:11.968 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:11.969 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:46:11.969 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:46:11.987 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:12.208 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:12.209 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:12.291 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:12.312 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:12.402 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:12.424 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:12.425 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:12.636 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:12.636 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:12.637 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:12.747 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:0000000C","TimeStamp":"2019-01-27T01:46:12.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:12.747 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:12.747 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:12.747 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:12.747 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:12.751 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:46:12.752 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:46:12.752 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:46:12.752 -08:00 [DBG] Start authorize callback request
2019-01-26 17:46:12.752 -08:00 [DBG] No user present in authorize request
2019-01-26 17:46:12.752 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:12.963 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:12.963 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:13.005 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:13.019 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:13.061 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:13.075 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:13.076 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:13.076 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:46:13.076 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:46:13.094 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:13.332 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:13.332 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:13.415 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:13.437 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:13.501 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:13.523 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:13.523 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:13.734 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:13.734 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:13.736 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:13.866 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:0000000F","TimeStamp":"2019-01-27T01:46:13.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:13.866 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:13.866 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:13.866 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:13.866 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:13.871 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:46:13.872 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:46:13.872 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:46:13.872 -08:00 [DBG] Start authorize callback request
2019-01-26 17:46:13.872 -08:00 [DBG] No user present in authorize request
2019-01-26 17:46:13.872 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:14.040 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:14.040 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:14.092 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:14.109 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:14.162 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:14.177 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:14.178 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:14.178 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:46:14.178 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:46:14.196 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:14.427 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:14.427 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:14.490 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:14.512 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:14.589 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:14.612 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:14.612 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:14.825 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:14.826 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:14.827 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:14.947 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:00000012","TimeStamp":"2019-01-27T01:46:14.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:14.947 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:14.947 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:14.947 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:14.947 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:46:14.951 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 17:46:14.952 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 17:46:14.952 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 17:46:14.952 -08:00 [DBG] Start authorize callback request
2019-01-26 17:46:14.952 -08:00 [DBG] No user present in authorize request
2019-01-26 17:46:14.952 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:15.141 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:15.141 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:15.184 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:15.199 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:15.252 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:15.267 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:15.267 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:15.267 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 17:46:15.267 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 17:46:15.286 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 17:46:15.511 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:15.511 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:15.596 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:15.617 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:15.681 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 17:46:15.703 -08:00 [DBG] Found [] API scopes in database
2019-01-26 17:46:15.703 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 17:46:15.908 -08:00 [DBG] angular_spa found in database: true
2019-01-26 17:46:15.908 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 17:46:15.909 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 17:46:16.022 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7E:00000015","TimeStamp":"2019-01-27T01:46:16.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 17:46:16.023 -08:00 [DBG] Augmenting SignInContext
2019-01-26 17:46:16.023 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 17:46:16.023 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 17:46:16.023 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 17:54:35.099 -08:00 [INF] Removing 0 grants
2019-01-26 18:16:16.059 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:18.267 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:18.267 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:18.335 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:18.360 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:18.442 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:18.463 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:18.463 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:18.718 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:18.718 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:18.749 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:19.101 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:19.101 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:19.196 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:19.228 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:19.324 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:19.356 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:19.356 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:19.644 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:19.644 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:19.752 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:20.323 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:00000003","TimeStamp":"2019-01-27T02:16:20.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:20.323 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:20.323 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:20.324 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:20.324 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:16:20.328 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:16:20.328 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:16:20.329 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:16:20.329 -08:00 [DBG] Start authorize callback request
2019-01-26 18:16:20.329 -08:00 [DBG] No user present in authorize request
2019-01-26 18:16:20.329 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:20.489 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:20.489 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:20.532 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:20.546 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:20.589 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:20.604 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:20.604 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:20.604 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:16:20.604 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:16:20.625 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:20.865 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:20.865 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:20.937 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:20.981 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:21.045 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:21.067 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:21.067 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:21.283 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:21.283 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:21.284 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:21.427 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:00000006","TimeStamp":"2019-01-27T02:16:21.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:21.427 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:21.427 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:21.427 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:21.428 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:16:21.433 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:16:21.433 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:16:21.433 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:16:21.433 -08:00 [DBG] Start authorize callback request
2019-01-26 18:16:21.433 -08:00 [DBG] No user present in authorize request
2019-01-26 18:16:21.433 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:21.582 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:21.582 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:21.625 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:21.649 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:21.702 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:21.716 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:21.716 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:21.716 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:16:21.717 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:16:21.735 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:21.963 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:21.963 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:22.025 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:22.046 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:22.110 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:22.133 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:22.133 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:22.336 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:22.336 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:22.337 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:22.447 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:00000009","TimeStamp":"2019-01-27T02:16:22.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:22.447 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:22.447 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:22.447 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:22.447 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:16:22.456 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:16:22.456 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:16:22.456 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:16:22.456 -08:00 [DBG] Start authorize callback request
2019-01-26 18:16:22.456 -08:00 [DBG] No user present in authorize request
2019-01-26 18:16:22.456 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:22.659 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:22.659 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:22.701 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:22.715 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:22.768 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:22.783 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:22.783 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:22.783 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:16:22.783 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:16:22.801 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:23.033 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:23.033 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:23.117 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:23.138 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:23.202 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:23.222 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:23.223 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:23.430 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:23.430 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:23.431 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:23.559 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:0000000C","TimeStamp":"2019-01-27T02:16:23.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:23.560 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:23.560 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:23.560 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:23.560 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:16:23.565 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:16:23.565 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:16:23.565 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:16:23.565 -08:00 [DBG] Start authorize callback request
2019-01-26 18:16:23.565 -08:00 [DBG] No user present in authorize request
2019-01-26 18:16:23.565 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:23.735 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:23.735 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:23.775 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:23.789 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:23.835 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:23.852 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:23.852 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:23.852 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:16:23.852 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:16:23.872 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:24.131 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:24.131 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:24.195 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:24.216 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:24.292 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:24.316 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:24.316 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:24.553 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:24.553 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:24.554 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:24.662 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:0000000F","TimeStamp":"2019-01-27T02:16:24.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:24.662 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:24.663 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:24.663 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:24.663 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:16:24.667 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:16:24.672 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:16:24.672 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:16:24.672 -08:00 [DBG] Start authorize callback request
2019-01-26 18:16:24.673 -08:00 [DBG] No user present in authorize request
2019-01-26 18:16:24.673 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:24.872 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:24.872 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:24.914 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:24.928 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:24.971 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:24.986 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:24.986 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:24.987 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:16:24.987 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:16:25.006 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:25.413 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:25.413 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:25.479 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:25.501 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:25.593 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:25.615 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:25.615 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:25.845 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:25.845 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:25.846 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:25.955 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:00000012","TimeStamp":"2019-01-27T02:16:25.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:25.955 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:25.955 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:25.955 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:25.955 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:16:25.960 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:16:25.960 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:16:25.960 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:16:25.960 -08:00 [DBG] Start authorize callback request
2019-01-26 18:16:25.960 -08:00 [DBG] No user present in authorize request
2019-01-26 18:16:25.960 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:26.155 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:26.155 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:26.198 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:26.213 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:26.256 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:26.270 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:26.270 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:26.270 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:16:26.270 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:16:26.299 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:16:26.520 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:26.520 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:26.608 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:26.628 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:26.693 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:16:26.713 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:16:26.714 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:16:26.916 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:16:26.916 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:16:26.918 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:16:27.045 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7F:00000015","TimeStamp":"2019-01-27T02:16:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:16:27.045 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:16:27.045 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:16:27.046 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:16:27.046 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:27.078 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:29.357 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:29.357 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:29.427 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:29.452 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:29.524 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:29.545 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:29.545 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:29.748 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:29.749 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:29.767 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:30.004 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:30.005 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:30.071 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:30.093 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:30.158 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:30.180 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:30.181 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:30.398 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:30.398 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:30.430 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:31.020 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:00000003","TimeStamp":"2019-01-27T02:46:31.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:31.020 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:31.020 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:31.020 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:31.020 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:31.025 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:46:31.025 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:46:31.025 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:46:31.025 -08:00 [DBG] Start authorize callback request
2019-01-26 18:46:31.025 -08:00 [DBG] No user present in authorize request
2019-01-26 18:46:31.025 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:31.198 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:31.198 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:31.241 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:31.257 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:31.308 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:31.322 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:31.322 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:31.322 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:46:31.322 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:46:31.342 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:31.570 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:31.570 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:31.644 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:31.665 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:31.729 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:31.750 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:31.750 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:31.972 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:31.972 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:31.973 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:32.106 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:00000006","TimeStamp":"2019-01-27T02:46:32.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:32.106 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:32.106 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:32.107 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:32.107 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:32.111 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:46:32.111 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:46:32.111 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:46:32.111 -08:00 [DBG] Start authorize callback request
2019-01-26 18:46:32.111 -08:00 [DBG] No user present in authorize request
2019-01-26 18:46:32.111 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:32.307 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:32.307 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:32.356 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:32.385 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:32.431 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:32.446 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:32.446 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:32.446 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:46:32.446 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:46:32.466 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:32.691 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:32.691 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:32.761 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:32.783 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:32.854 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:32.876 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:32.876 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:33.107 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:33.107 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:33.108 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:33.216 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:00000009","TimeStamp":"2019-01-27T02:46:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:33.216 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:33.216 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:33.216 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:33.217 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:33.221 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:46:33.221 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:46:33.221 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:46:33.221 -08:00 [DBG] Start authorize callback request
2019-01-26 18:46:33.221 -08:00 [DBG] No user present in authorize request
2019-01-26 18:46:33.221 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:33.411 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:33.411 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:33.454 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:33.470 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:33.513 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:33.530 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:33.530 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:33.530 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:46:33.530 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:46:33.553 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:33.968 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:33.968 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:34.152 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:34.173 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:34.237 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:34.258 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:34.258 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:34.480 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:34.480 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:34.482 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:34.610 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:0000000C","TimeStamp":"2019-01-27T02:46:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:34.610 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:34.610 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:34.611 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:34.611 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:34.615 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:46:34.615 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:46:34.616 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:46:34.616 -08:00 [DBG] Start authorize callback request
2019-01-26 18:46:34.616 -08:00 [DBG] No user present in authorize request
2019-01-26 18:46:34.616 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:34.767 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:34.767 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:34.815 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:34.833 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:34.878 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:34.892 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:34.893 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:34.893 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:46:34.893 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:46:34.912 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:35.155 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:35.155 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:35.218 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:35.240 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:35.307 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:35.329 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:35.329 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:35.537 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:35.537 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:35.538 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:35.648 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:0000000F","TimeStamp":"2019-01-27T02:46:35.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:35.648 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:35.648 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:35.648 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:35.648 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:35.653 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:46:35.653 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:46:35.653 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:46:35.653 -08:00 [DBG] Start authorize callback request
2019-01-26 18:46:35.653 -08:00 [DBG] No user present in authorize request
2019-01-26 18:46:35.653 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:35.850 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:35.850 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:35.899 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:35.914 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:35.958 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:35.979 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:35.979 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:35.980 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:46:35.980 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:46:36.006 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:36.254 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:36.254 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:36.318 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:36.339 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:36.403 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:36.425 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:36.425 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:36.639 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:36.639 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:36.641 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:36.768 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:00000012","TimeStamp":"2019-01-27T02:46:36.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:36.768 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:36.768 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:36.768 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:36.768 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:46:36.772 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 18:46:36.773 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 18:46:36.773 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 18:46:36.773 -08:00 [DBG] Start authorize callback request
2019-01-26 18:46:36.773 -08:00 [DBG] No user present in authorize request
2019-01-26 18:46:36.773 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:36.941 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:36.941 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:36.984 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:36.998 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:37.042 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:37.058 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:37.058 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:37.058 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 18:46:37.058 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 18:46:37.079 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 18:46:37.325 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:37.326 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:37.427 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:37.448 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:37.513 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 18:46:37.535 -08:00 [DBG] Found [] API scopes in database
2019-01-26 18:46:37.535 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 18:46:37.774 -08:00 [DBG] angular_spa found in database: true
2019-01-26 18:46:37.774 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 18:46:37.776 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 18:46:37.890 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7G:00000015","TimeStamp":"2019-01-27T02:46:37.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 18:46:37.890 -08:00 [DBG] Augmenting SignInContext
2019-01-26 18:46:37.890 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 18:46:37.890 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 18:46:37.890 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 18:54:35.533 -08:00 [INF] Removing 0 grants
2019-01-26 19:16:37.861 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:40.013 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:40.013 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:40.081 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:40.108 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:40.174 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:40.195 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:40.196 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:40.398 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:40.398 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:40.429 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:40.671 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:40.671 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:40.734 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:40.755 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:40.820 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:40.841 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:40.841 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:41.063 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:41.063 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:41.071 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:41.656 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:00000003","TimeStamp":"2019-01-27T03:16:41.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:41.656 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:41.656 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:41.656 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:41.656 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:16:41.661 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:16:41.661 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:16:41.662 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:16:41.662 -08:00 [DBG] Start authorize callback request
2019-01-26 19:16:41.662 -08:00 [DBG] No user present in authorize request
2019-01-26 19:16:41.662 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:41.815 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:41.816 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:41.858 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:41.872 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:41.919 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:41.938 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:41.938 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:41.938 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:16:41.938 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:16:41.957 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:42.201 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:42.202 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:42.264 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:42.285 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:42.348 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:42.375 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:42.376 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:42.619 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:42.619 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:42.621 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:42.731 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:00000006","TimeStamp":"2019-01-27T03:16:42.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:42.731 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:42.731 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:42.731 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:42.731 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:16:42.735 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:16:42.736 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:16:42.736 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:16:42.736 -08:00 [DBG] Start authorize callback request
2019-01-26 19:16:42.736 -08:00 [DBG] No user present in authorize request
2019-01-26 19:16:42.736 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:42.897 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:42.897 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:42.939 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:42.953 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:42.997 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:43.012 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:43.012 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:43.012 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:16:43.012 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:16:43.031 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:43.251 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:43.251 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:43.322 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:43.343 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:43.408 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:43.431 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:43.431 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:43.645 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:43.645 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:43.647 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:43.773 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:00000009","TimeStamp":"2019-01-27T03:16:43.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:43.773 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:43.773 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:43.773 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:43.773 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:16:43.778 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:16:43.778 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:16:43.778 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:16:43.778 -08:00 [DBG] Start authorize callback request
2019-01-26 19:16:43.778 -08:00 [DBG] No user present in authorize request
2019-01-26 19:16:43.778 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:43.945 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:43.946 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:43.993 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:44.008 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:44.073 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:44.092 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:44.092 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:44.092 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:16:44.092 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:16:44.111 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:44.331 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:44.331 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:44.415 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:44.440 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:44.511 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:44.533 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:44.534 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:44.748 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:44.748 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:44.749 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:44.857 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:0000000C","TimeStamp":"2019-01-27T03:16:44.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:44.857 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:44.857 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:44.857 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:44.857 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:16:44.862 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:16:44.862 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:16:44.862 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:16:44.862 -08:00 [DBG] Start authorize callback request
2019-01-26 19:16:44.862 -08:00 [DBG] No user present in authorize request
2019-01-26 19:16:44.862 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:45.022 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:45.022 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:45.068 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:45.082 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:45.125 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:45.145 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:45.145 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:45.145 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:16:45.145 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:16:45.165 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:45.396 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:45.396 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:45.460 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:45.489 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:45.552 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:45.574 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:45.574 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:45.811 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:45.811 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:45.812 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:45.942 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:0000000F","TimeStamp":"2019-01-27T03:16:45.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:45.942 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:45.942 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:45.942 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:45.942 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:16:45.947 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:16:45.948 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:16:45.948 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:16:45.948 -08:00 [DBG] Start authorize callback request
2019-01-26 19:16:45.948 -08:00 [DBG] No user present in authorize request
2019-01-26 19:16:45.948 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:46.177 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:46.178 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:46.274 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:46.307 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:46.401 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:46.452 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:46.452 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:46.452 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:16:46.452 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:16:46.496 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:46.751 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:46.751 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:46.814 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:46.835 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:46.913 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:46.935 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:46.935 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:47.190 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:47.190 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:47.191 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:47.299 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:00000012","TimeStamp":"2019-01-27T03:16:47.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:47.299 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:47.299 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:47.300 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:47.300 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:16:47.304 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:16:47.304 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:16:47.304 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:16:47.304 -08:00 [DBG] Start authorize callback request
2019-01-26 19:16:47.305 -08:00 [DBG] No user present in authorize request
2019-01-26 19:16:47.305 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:47.486 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:47.486 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:47.530 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:47.563 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:47.611 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:47.626 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:47.626 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:47.626 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:16:47.626 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:16:47.645 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:16:47.879 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:47.879 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:47.942 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:47.963 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:48.026 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:16:48.059 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:16:48.059 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:16:48.297 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:16:48.297 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:16:48.298 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:16:48.433 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7H:00000015","TimeStamp":"2019-01-27T03:16:48.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:16:48.433 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:16:48.433 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:16:48.434 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:16:48.434 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:48.396 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:50.593 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:50.593 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:50.661 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:50.686 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:50.762 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:50.785 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:50.785 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:51.038 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:51.038 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:51.057 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:51.288 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:51.288 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:51.351 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:51.373 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:51.438 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:51.460 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:51.460 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:51.670 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:51.670 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:51.778 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:52.411 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:00000003","TimeStamp":"2019-01-27T03:46:52.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:52.411 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:52.411 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:52.411 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:52.411 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:52.416 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:46:52.416 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:46:52.416 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:46:52.416 -08:00 [DBG] Start authorize callback request
2019-01-26 19:46:52.416 -08:00 [DBG] No user present in authorize request
2019-01-26 19:46:52.416 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:52.565 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:52.565 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:52.623 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:52.638 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:52.684 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:52.698 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:52.698 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:52.699 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:46:52.699 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:46:52.717 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:52.975 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:52.975 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:53.038 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:53.064 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:53.130 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:53.151 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:53.151 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:53.357 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:53.357 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:53.358 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:53.465 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:00000006","TimeStamp":"2019-01-27T03:46:53.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:53.465 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:53.465 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:53.465 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:53.465 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:53.469 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:46:53.470 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:46:53.470 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:46:53.470 -08:00 [DBG] Start authorize callback request
2019-01-26 19:46:53.470 -08:00 [DBG] No user present in authorize request
2019-01-26 19:46:53.470 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:53.657 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:53.657 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:53.698 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:53.715 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:53.776 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:53.798 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:53.798 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:53.798 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:46:53.798 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:46:53.820 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:54.080 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:54.081 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:54.144 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:54.165 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:54.228 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:54.259 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:54.259 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:54.475 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:54.475 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:54.476 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:54.597 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:00000009","TimeStamp":"2019-01-27T03:46:54.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:54.597 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:54.597 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:54.597 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:54.597 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:54.602 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:46:54.602 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:46:54.602 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:46:54.602 -08:00 [DBG] Start authorize callback request
2019-01-26 19:46:54.602 -08:00 [DBG] No user present in authorize request
2019-01-26 19:46:54.602 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:54.777 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:54.777 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:54.819 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:54.834 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:54.876 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:54.891 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:54.891 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:54.891 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:46:54.891 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:46:54.920 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:55.139 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:55.139 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:55.201 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:55.226 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:55.295 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:55.316 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:55.316 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:55.516 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:55.516 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:55.518 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:55.625 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:0000000C","TimeStamp":"2019-01-27T03:46:55.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:55.625 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:55.625 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:55.625 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:55.625 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:55.630 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:46:55.630 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:46:55.630 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:46:55.630 -08:00 [DBG] Start authorize callback request
2019-01-26 19:46:55.630 -08:00 [DBG] No user present in authorize request
2019-01-26 19:46:55.630 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:55.821 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:55.821 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:55.870 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:55.885 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:55.934 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:55.949 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:55.949 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:55.949 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:46:55.949 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:46:55.968 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:56.200 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:56.200 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:56.262 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:56.283 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:56.345 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:56.366 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:56.367 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:56.581 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:56.581 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:56.582 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:56.744 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:0000000F","TimeStamp":"2019-01-27T03:46:56.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:56.744 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:56.744 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:56.745 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:56.745 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:56.749 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:46:56.749 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:46:56.749 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:46:56.749 -08:00 [DBG] Start authorize callback request
2019-01-26 19:46:56.750 -08:00 [DBG] No user present in authorize request
2019-01-26 19:46:56.750 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:56.911 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:56.911 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:56.953 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:56.968 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:57.012 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:57.027 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:57.028 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:57.028 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:46:57.028 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:46:57.046 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:57.282 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:57.282 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:57.356 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:57.378 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:57.442 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:57.464 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:57.464 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:57.677 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:57.678 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:57.679 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:57.810 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:00000012","TimeStamp":"2019-01-27T03:46:57.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:57.810 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:57.810 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:57.810 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:57.810 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:46:57.815 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 19:46:57.815 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 19:46:57.815 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 19:46:57.815 -08:00 [DBG] Start authorize callback request
2019-01-26 19:46:57.815 -08:00 [DBG] No user present in authorize request
2019-01-26 19:46:57.815 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:58.096 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:58.096 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:58.289 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:58.322 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:58.369 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:58.384 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:58.385 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:58.385 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 19:46:58.385 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 19:46:58.403 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 19:46:58.641 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:58.641 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:58.703 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:58.724 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:58.787 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 19:46:58.814 -08:00 [DBG] Found [] API scopes in database
2019-01-26 19:46:58.814 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 19:46:59.035 -08:00 [DBG] angular_spa found in database: true
2019-01-26 19:46:59.035 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 19:46:59.036 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 19:46:59.149 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7I:00000015","TimeStamp":"2019-01-27T03:46:59.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 19:46:59.149 -08:00 [DBG] Augmenting SignInContext
2019-01-26 19:46:59.149 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 19:46:59.150 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 19:46:59.150 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 19:54:35.839 -08:00 [INF] Removing 0 grants
2019-01-26 20:16:59.119 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:01.325 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:01.325 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:01.402 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:01.429 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:01.492 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:01.513 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:01.513 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:01.727 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:01.727 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:01.747 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:02.007 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:02.007 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:02.071 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:02.098 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:02.167 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:02.188 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:02.189 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:02.434 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:02.434 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:02.442 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:03.022 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:00000003","TimeStamp":"2019-01-27T04:17:03.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:03.022 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:03.022 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:03.022 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:03.022 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:17:03.034 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 20:17:03.034 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 20:17:03.034 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 20:17:03.034 -08:00 [DBG] Start authorize callback request
2019-01-26 20:17:03.034 -08:00 [DBG] No user present in authorize request
2019-01-26 20:17:03.034 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:03.186 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:03.186 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:03.242 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:03.269 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:03.315 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:03.330 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:03.330 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:03.330 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 20:17:03.330 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 20:17:03.349 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:03.588 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:03.588 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:03.652 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:03.674 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:03.743 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:03.766 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:03.766 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:03.978 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:03.978 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:03.980 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:04.125 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:00000006","TimeStamp":"2019-01-27T04:17:04.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:04.125 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:04.125 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:04.125 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:04.125 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:17:04.130 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 20:17:04.130 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 20:17:04.130 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 20:17:04.131 -08:00 [DBG] Start authorize callback request
2019-01-26 20:17:04.131 -08:00 [DBG] No user present in authorize request
2019-01-26 20:17:04.131 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:04.322 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:04.322 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:04.366 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:04.381 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:04.425 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:04.440 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:04.440 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:04.440 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 20:17:04.440 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 20:17:04.460 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:04.691 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:04.691 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:04.759 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:04.782 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:04.847 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:04.868 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:04.869 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:05.098 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:05.098 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:05.099 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:05.231 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:00000009","TimeStamp":"2019-01-27T04:17:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:05.231 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:05.231 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:05.232 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:05.232 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:17:05.236 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 20:17:05.237 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 20:17:05.237 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 20:17:05.237 -08:00 [DBG] Start authorize callback request
2019-01-26 20:17:05.237 -08:00 [DBG] No user present in authorize request
2019-01-26 20:17:05.237 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:05.714 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:05.714 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:05.758 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:05.774 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:05.818 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:05.834 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:05.834 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:05.834 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 20:17:05.834 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 20:17:05.853 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:06.104 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:06.105 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:06.178 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:06.202 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:06.266 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:06.287 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:06.288 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:06.507 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:06.507 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:06.508 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:06.618 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:0000000C","TimeStamp":"2019-01-27T04:17:06.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:06.618 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:06.618 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:06.618 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:06.619 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:17:06.623 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 20:17:06.623 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 20:17:06.623 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 20:17:06.623 -08:00 [DBG] Start authorize callback request
2019-01-26 20:17:06.624 -08:00 [DBG] No user present in authorize request
2019-01-26 20:17:06.624 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:06.834 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:06.834 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:06.878 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:06.893 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:06.941 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:06.956 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:06.957 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:06.957 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 20:17:06.957 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 20:17:06.976 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:07.231 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:07.232 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:07.295 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:07.317 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:07.398 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:07.420 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:07.420 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:07.631 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:07.631 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:07.632 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:07.742 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:0000000F","TimeStamp":"2019-01-27T04:17:07.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:07.742 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:07.742 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:07.742 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:07.743 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:17:07.747 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 20:17:07.747 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 20:17:07.747 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 20:17:07.747 -08:00 [DBG] Start authorize callback request
2019-01-26 20:17:07.748 -08:00 [DBG] No user present in authorize request
2019-01-26 20:17:07.748 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:07.933 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:07.933 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:07.977 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:07.991 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:08.035 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:08.050 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:08.050 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:08.051 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 20:17:08.051 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 20:17:08.075 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:08.327 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:08.327 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:08.394 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:08.415 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:08.479 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:08.501 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:08.501 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:08.733 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:08.733 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:08.734 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:08.861 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:00000012","TimeStamp":"2019-01-27T04:17:08.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:08.861 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:08.861 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:08.861 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:08.862 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:17:08.866 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-26 20:17:08.866 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-26 20:17:08.866 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-26 20:17:08.866 -08:00 [DBG] Start authorize callback request
2019-01-26 20:17:08.866 -08:00 [DBG] No user present in authorize request
2019-01-26 20:17:08.866 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:09.018 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:09.018 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:09.061 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:09.104 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:09.168 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:09.183 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:09.183 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:09.184 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"9f1314cdf42b43cbab58ae9c2c980293","UiLocales":null,"Nonce":"ad7756590f7646b39786dfcb04d999c6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"9f1314cdf42b43cbab58ae9c2c980293","nonce":"ad7756590f7646b39786dfcb04d999c6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-26 20:17:09.184 -08:00 [INF] Showing login: User is not authenticated
2019-01-26 20:17:09.204 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:17:09.470 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:09.470 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:09.534 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:09.555 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:09.635 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:17:09.656 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:17:09.656 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:17:09.886 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:17:09.886 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:17:09.887 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:17:09.995 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7J:00000015","TimeStamp":"2019-01-27T04:17:09.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:17:09.995 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:17:09.995 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:17:09.996 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:17:09.996 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:25.935 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:25.998 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:26.712 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000004","TimeStamp":"2019-01-27T04:27:26.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:26.712 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:26.712 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:26.712 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:26.712 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:26.716 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:26.736 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:26.895 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000007","TimeStamp":"2019-01-27T04:27:26.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:26.895 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:26.895 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:26.896 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:26.896 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:26.899 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:26.920 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.107 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000000A","TimeStamp":"2019-01-27T04:27:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:27.107 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:27.107 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:27.107 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:27.107 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:27.111 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:27.133 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.278 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000000D","TimeStamp":"2019-01-27T04:27:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:27.278 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:27.278 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:27.278 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:27.278 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:27.282 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:27.308 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.443 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000010","TimeStamp":"2019-01-27T04:27:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:27.443 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:27.443 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:27.444 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:27.444 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:27.447 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:27.468 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.587 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000013","TimeStamp":"2019-01-27T04:27:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:27.587 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:27.587 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:27.587 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:27.587 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:27.591 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:27.618 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.689 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.824 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000017","TimeStamp":"2019-01-27T04:27:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:27.824 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:27.824 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:27.825 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:27.825 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:27.829 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:27.856 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:27.976 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000001A","TimeStamp":"2019-01-27T04:27:27.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:27.976 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:27.976 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:27.976 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:27.977 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:27.981 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:28.002 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:28.113 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000001D","TimeStamp":"2019-01-27T04:27:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:28.113 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:28.113 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:28.113 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:28.113 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:28.117 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:28.137 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:28.293 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000020","TimeStamp":"2019-01-27T04:27:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:28.293 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:28.294 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:28.294 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:28.294 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:28.298 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:28.336 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:28.447 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000023","TimeStamp":"2019-01-27T04:27:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:28.447 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:28.447 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:28.447 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:28.447 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:28.451 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:28.471 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:28.618 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000026","TimeStamp":"2019-01-27T04:27:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:28.618 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:28.618 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:28.619 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:28.619 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:28.622 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:28.642 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:28.787 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000029","TimeStamp":"2019-01-27T04:27:28.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:28.787 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:28.787 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:28.787 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:28.787 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:33.820 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:33.953 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000002B","TimeStamp":"2019-01-27T04:27:33.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:33.953 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:33.953 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:33.953 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:33.953 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:33.957 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:33.977 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:34.088 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000002E","TimeStamp":"2019-01-27T04:27:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:34.088 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:34.088 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:34.088 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:34.088 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:34.093 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:34.112 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:34.268 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000031","TimeStamp":"2019-01-27T04:27:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:34.268 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:34.268 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:34.268 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:34.268 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:34.272 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:34.292 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:34.403 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000034","TimeStamp":"2019-01-27T04:27:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:34.403 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:34.403 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:34.404 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:34.404 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:34.407 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:34.427 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:34.585 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000037","TimeStamp":"2019-01-27T04:27:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:34.585 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:34.585 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:34.586 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:34.586 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:34.590 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:34.610 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:34.720 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000003A","TimeStamp":"2019-01-27T04:27:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:34.720 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:34.720 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:34.720 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:34.720 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:27:34.724 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:27:34.756 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:27:34.892 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000003D","TimeStamp":"2019-01-27T04:27:34.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:27:34.892 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:27:34.892 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:27:34.892 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:27:34.892 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:04.924 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:05.073 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000003F","TimeStamp":"2019-01-27T04:28:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:05.073 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:05.073 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:05.073 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:05.073 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:05.077 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:28:05.124 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:05.240 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000042","TimeStamp":"2019-01-27T04:28:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:05.240 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:05.240 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:05.241 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:05.241 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:05.244 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:28:05.264 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:05.411 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000045","TimeStamp":"2019-01-27T04:28:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:05.411 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:05.411 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:05.411 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:05.411 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:05.415 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:28:05.436 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:05.545 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000048","TimeStamp":"2019-01-27T04:28:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:05.545 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:05.545 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:05.545 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:05.546 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:05.549 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:28:05.569 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:05.729 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000004B","TimeStamp":"2019-01-27T04:28:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:05.729 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:05.729 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:05.729 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:05.729 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:05.733 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:28:05.753 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:05.864 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:0000004E","TimeStamp":"2019-01-27T04:28:05.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:05.864 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:05.865 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:05.865 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:05.865 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:28:05.869 -08:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-01-26 20:28:05.916 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-26 20:28:06.066 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK3KQ6Q4J7K:00000051","TimeStamp":"2019-01-27T04:28:06.0000000Z","ProcessId":25140,"LocalIpAddress":"127.0.0.1:46596","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-26 20:28:06.066 -08:00 [DBG] Augmenting SignInContext
2019-01-26 20:28:06.066 -08:00 [DBG] Adding amr claim with value: external
2019-01-26 20:28:06.066 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-26 20:28:06.066 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-26 20:36:28.433 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback() in S:\netcore_tutorials\sts_tutorials\Quickstart\Account\AccountController.cs:line 190
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-01-26 20:52:24.831 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:52:27.062 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:52:27.062 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:52:27.135 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:52:27.173 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:52:27.240 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:52:27.262 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:52:27.262 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:52:27.485 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:52:27.485 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:54:35.250 -08:00 [DBG] Start authorize request protocol validation
2019-01-26 20:54:35.489 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:54:35.489 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-26 20:54:35.575 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:54:35.597 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:54:35.662 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-26 20:54:35.684 -08:00 [DBG] Found [] API scopes in database
2019-01-26 20:54:35.684 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-26 20:54:35.805 -08:00 [INF] Removing 0 grants
2019-01-26 20:54:35.915 -08:00 [DBG] angular_spa found in database: true
2019-01-26 20:54:35.915 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-27 06:42:58.758 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-27 06:42:59.117 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-27 06:42:59.118 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-27 06:42:59.118 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-27 06:42:59.118 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-27 06:42:59.118 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-27 06:42:59.118 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-27 06:42:59.389 -08:00 [DBG] Starting grant removal
2019-01-27 06:42:59.640 -08:00 [DBG] Login Url: /Account/Login
2019-01-27 06:42:59.643 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-27 06:42:59.643 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-27 06:42:59.643 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-27 06:42:59.643 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-27 06:42:59.644 -08:00 [DBG] Error Url: /home/error
2019-01-27 06:42:59.644 -08:00 [DBG] Error Id Parameter: errorId
2019-01-27 07:02:41.090 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-27 07:02:41.226 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-27 07:02:41.227 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-27 07:02:41.227 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-27 07:02:41.227 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-27 07:02:41.227 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-27 07:02:41.227 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-27 07:02:41.376 -08:00 [DBG] Starting grant removal
2019-01-27 07:02:41.754 -08:00 [DBG] Login Url: /Account/Login
2019-01-27 07:02:41.755 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-27 07:02:41.755 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-27 07:02:41.755 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-27 07:02:41.755 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-27 07:02:41.755 -08:00 [DBG] Error Url: /home/error
2019-01-27 07:02:41.756 -08:00 [DBG] Error Id Parameter: errorId
2019-01-27 07:03:48.919 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-27 07:03:49.902 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-27 07:03:49.905 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-27 07:03:49.906 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-27 07:03:49.917 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-27 07:03:49.917 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-27 07:03:49.920 -08:00 [DBG] Start discovery request
2019-01-27 07:03:50.516 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-27 07:03:50.545 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-27 07:03:50.557 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-27 07:03:50.557 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-27 07:03:50.561 -08:00 [DBG] Start authorize request
2019-01-27 07:03:50.571 -08:00 [DBG] No user present in authorize request
2019-01-27 07:03:50.582 -08:00 [DBG] Start authorize request protocol validation
2019-01-27 07:03:51.021 -08:00 [DBG] angular_spa found in database: true
2019-01-27 07:03:51.025 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-27 07:03:51.108 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-27 07:03:51.153 -08:00 [DBG] Found [] API scopes in database
2019-01-27 07:03:51.205 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-27 07:03:51.221 -08:00 [DBG] Found [] API scopes in database
2019-01-27 07:03:51.227 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-27 07:03:51.237 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"3812fba91663497ca69a4b3977000b6d","UiLocales":null,"Nonce":"acc253d30b2f47e08ce999a1a879140a","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"3812fba91663497ca69a4b3977000b6d","nonce":"acc253d30b2f47e08ce999a1a879140a"},"$type":"AuthorizeRequestValidationLog"}
2019-01-27 07:03:51.246 -08:00 [INF] Showing login: User is not authenticated
2019-01-27 07:36:44.295 -08:00 [DBG] Start authorize request protocol validation
2019-01-27 07:36:44.583 -08:00 [DBG] angular_spa found in database: true
2019-01-27 07:36:44.583 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-27 07:36:44.656 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-27 07:36:44.683 -08:00 [DBG] Found [] API scopes in database
2019-01-27 07:36:44.751 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-27 07:36:44.773 -08:00 [DBG] Found [] API scopes in database
2019-01-27 07:36:44.773 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-27 07:54:09.892 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-27 07:54:10.036 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-27 07:54:10.036 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-27 07:54:10.036 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-27 07:54:10.036 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-27 07:54:10.036 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-27 07:54:10.036 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-27 07:54:10.174 -08:00 [DBG] Starting grant removal
2019-01-27 07:54:10.477 -08:00 [DBG] Login Url: /Account/Login
2019-01-27 07:54:10.478 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-27 07:54:10.478 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-27 07:54:10.478 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-27 07:54:10.478 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-27 07:54:10.478 -08:00 [DBG] Error Url: /home/error
2019-01-27 07:54:10.478 -08:00 [DBG] Error Id Parameter: errorId
2019-01-27 08:54:10.863 -08:00 [INF] Removing 0 grants
2019-01-27 09:54:11.348 -08:00 [INF] Removing 0 grants
2019-01-27 10:54:11.792 -08:00 [INF] Removing 0 grants
2019-01-27 11:54:12.239 -08:00 [INF] Removing 0 grants
2019-01-27 12:54:12.695 -08:00 [INF] Removing 0 grants
2019-01-27 13:54:13.021 -08:00 [INF] Removing 0 grants
2019-01-27 14:54:13.357 -08:00 [INF] Removing 0 grants
2019-01-27 15:54:13.727 -08:00 [INF] Removing 0 grants
2019-01-27 16:54:14.162 -08:00 [INF] Removing 0 grants
2019-01-27 17:54:14.579 -08:00 [INF] Removing 0 grants
2019-01-27 18:54:15.004 -08:00 [INF] Removing 0 grants
2019-01-27 19:54:15.441 -08:00 [INF] Removing 0 grants
2019-01-27 20:54:15.878 -08:00 [INF] Removing 0 grants
2019-01-27 21:54:16.342 -08:00 [INF] Removing 0 grants
2019-01-27 22:54:16.656 -08:00 [INF] Removing 0 grants
2019-01-27 23:54:17.526 -08:00 [INF] Removing 0 grants
2019-01-28 00:54:17.902 -08:00 [INF] Removing 0 grants
2019-01-28 01:54:18.305 -08:00 [INF] Removing 0 grants
2019-01-28 02:54:18.757 -08:00 [INF] Removing 0 grants
2019-01-28 03:54:19.180 -08:00 [INF] Removing 0 grants
2019-01-28 04:54:19.623 -08:00 [INF] Removing 0 grants
2019-01-28 05:54:20.072 -08:00 [INF] Removing 0 grants
2019-01-28 06:54:21.093 -08:00 [INF] Removing 0 grants
2019-01-28 07:47:08.808 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 07:47:09.166 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 07:47:09.166 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 07:47:09.166 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 07:47:09.166 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 07:47:09.166 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 07:47:09.166 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 07:47:09.442 -08:00 [DBG] Starting grant removal
2019-01-28 07:47:09.854 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 07:47:09.856 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 07:47:09.856 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 07:47:09.856 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 07:47:09.856 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 07:47:09.856 -08:00 [DBG] Error Url: /home/error
2019-01-28 07:47:09.856 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 07:47:49.068 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 07:47:50.124 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 07:47:50.129 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 07:47:50.130 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 07:47:50.143 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 07:47:50.143 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 07:47:50.146 -08:00 [DBG] Start discovery request
2019-01-28 07:47:50.776 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 07:47:50.812 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 07:47:50.821 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 07:47:50.821 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 07:47:50.825 -08:00 [DBG] Start authorize request
2019-01-28 07:47:50.831 -08:00 [DBG] No user present in authorize request
2019-01-28 07:47:50.884 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:47:51.316 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:47:51.321 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:47:51.409 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:47:51.454 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:47:51.510 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:47:51.526 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:47:51.532 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:47:51.542 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"99ffa62441ff492cbea82d6534064c41","UiLocales":null,"Nonce":"62d571401fc14e9080059f52179c01fe","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"99ffa62441ff492cbea82d6534064c41","nonce":"62d571401fc14e9080059f52179c01fe"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 07:47:51.551 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 07:49:24.117 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 07:49:24.260 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 07:49:24.260 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 07:49:24.260 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 07:49:24.260 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 07:49:24.261 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 07:49:24.261 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 07:49:24.419 -08:00 [DBG] Starting grant removal
2019-01-28 07:49:24.589 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 07:49:24.591 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 07:49:24.591 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 07:49:24.591 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 07:49:24.591 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 07:49:24.591 -08:00 [DBG] Error Url: /home/error
2019-01-28 07:49:24.591 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 07:50:17.195 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 07:50:18.020 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 07:50:18.023 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 07:50:18.024 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 07:50:18.078 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 07:50:18.078 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 07:50:18.082 -08:00 [DBG] Start discovery request
2019-01-28 07:50:18.716 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 07:50:18.748 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 07:50:18.751 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 07:50:18.751 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 07:50:18.755 -08:00 [DBG] Start authorize request
2019-01-28 07:50:18.762 -08:00 [DBG] No user present in authorize request
2019-01-28 07:50:18.773 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:50:19.173 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:50:19.178 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:50:19.260 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:50:19.305 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:50:19.358 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:50:19.381 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:50:19.386 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:50:19.397 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"a1c34f6c5e2f441e8fb3450aae0e3bbb","UiLocales":null,"Nonce":"3641d48c8e264d5c833ee77b6d81cf14","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"a1c34f6c5e2f441e8fb3450aae0e3bbb","nonce":"3641d48c8e264d5c833ee77b6d81cf14"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 07:50:19.406 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 07:51:41.121 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:51:41.392 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:51:41.393 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:51:41.462 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:51:41.492 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:51:41.564 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:51:41.586 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:51:41.586 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:51:48.430 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:51:48.431 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:53:23.252 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 07:53:23.395 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 07:53:23.396 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 07:53:23.396 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 07:53:23.396 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 07:53:23.396 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 07:53:23.396 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 07:53:23.559 -08:00 [DBG] Starting grant removal
2019-01-28 07:53:23.952 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 07:53:23.954 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 07:53:23.954 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 07:53:23.954 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 07:53:23.954 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 07:53:23.954 -08:00 [DBG] Error Url: /home/error
2019-01-28 07:53:23.954 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 07:54:08.837 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 07:54:09.672 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 07:54:09.676 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 07:54:09.677 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 07:54:09.708 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 07:54:09.708 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 07:54:09.712 -08:00 [DBG] Start discovery request
2019-01-28 07:54:10.251 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 07:54:10.285 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 07:54:10.288 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 07:54:10.288 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 07:54:10.302 -08:00 [DBG] Start authorize request
2019-01-28 07:54:10.308 -08:00 [DBG] No user present in authorize request
2019-01-28 07:54:10.320 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:54:10.726 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:54:10.731 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:54:10.842 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:54:10.886 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:54:10.939 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:54:10.957 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:54:10.963 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:54:10.974 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"dd9b41aad53f4619a32e4afe0020bff3","UiLocales":null,"Nonce":"7a9463e8197d423690411588867848f9","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"dd9b41aad53f4619a32e4afe0020bff3","nonce":"7a9463e8197d423690411588867848f9"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 07:54:10.984 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 07:54:21.512 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:54:21.752 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:54:21.752 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:54:21.818 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:54:21.841 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:54:21.918 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:54:21.939 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:54:21.940 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:55:07.725 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 07:55:07.862 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 07:55:07.862 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 07:55:07.862 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 07:55:07.862 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 07:55:07.863 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 07:55:07.863 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 07:55:08.010 -08:00 [DBG] Starting grant removal
2019-01-28 07:55:08.395 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 07:55:08.397 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 07:55:08.397 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 07:55:08.397 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 07:55:08.397 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 07:55:08.397 -08:00 [DBG] Error Url: /home/error
2019-01-28 07:55:08.397 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 07:55:26.873 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 07:55:27.708 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 07:55:27.712 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 07:55:27.718 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 07:55:27.741 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 07:55:27.741 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 07:55:27.744 -08:00 [DBG] Start discovery request
2019-01-28 07:55:28.335 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 07:55:28.374 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 07:55:28.376 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 07:55:28.377 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 07:55:28.380 -08:00 [DBG] Start authorize request
2019-01-28 07:55:28.386 -08:00 [DBG] No user present in authorize request
2019-01-28 07:55:28.398 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:55:28.869 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:55:28.874 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:55:28.964 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:55:29.011 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:55:29.068 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:55:29.084 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:55:29.090 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:55:29.101 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"599e2b88cc98447684604e1728ebd3b9","UiLocales":null,"Nonce":"8a5bc51e3edb400bb602a6cafd9e6c5b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"599e2b88cc98447684604e1728ebd3b9","nonce":"8a5bc51e3edb400bb602a6cafd9e6c5b"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 07:55:29.110 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 07:56:00.454 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:56:00.739 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:56:00.739 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:56:00.809 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:56:00.835 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:56:00.911 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:56:00.933 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:56:00.933 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:56:12.130 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:56:12.130 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:57:42.538 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 07:57:42.634 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at Host.Quickstart.Account.ExternalController.Callback() in S:\netcore_tutorials\sts_tutorials\Quickstart\Account\ExternalController.cs:line 95
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-01-28 07:58:26.346 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 07:58:26.489 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 07:58:26.489 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 07:58:26.489 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 07:58:26.489 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 07:58:26.489 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 07:58:26.489 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 07:58:26.642 -08:00 [DBG] Starting grant removal
2019-01-28 07:58:26.934 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 07:58:26.936 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 07:58:26.936 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 07:58:26.936 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 07:58:26.936 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 07:58:26.936 -08:00 [DBG] Error Url: /home/error
2019-01-28 07:58:26.936 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 07:58:40.634 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 07:58:41.454 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 07:58:41.457 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 07:58:41.459 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 07:58:41.490 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 07:58:41.490 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 07:58:41.493 -08:00 [DBG] Start discovery request
2019-01-28 07:58:42.076 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 07:58:42.107 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 07:58:42.111 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 07:58:42.111 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 07:58:42.115 -08:00 [DBG] Start authorize request
2019-01-28 07:58:42.120 -08:00 [DBG] No user present in authorize request
2019-01-28 07:58:42.133 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:58:42.551 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:58:42.556 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:58:42.647 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:58:42.696 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:58:42.752 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:58:42.768 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:58:42.774 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:58:42.784 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"69e94574717542a3a3e73d21a94e045a","UiLocales":null,"Nonce":"016448f8523748bdae1280d03dc728b6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"69e94574717542a3a3e73d21a94e045a","nonce":"016448f8523748bdae1280d03dc728b6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 07:58:42.795 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 07:58:50.609 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 07:58:50.858 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:58:50.858 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 07:58:50.925 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:58:50.947 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:58:51.017 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 07:58:51.043 -08:00 [DBG] Found [] API scopes in database
2019-01-28 07:58:51.043 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 07:58:51.256 -08:00 [DBG] angular_spa found in database: true
2019-01-28 07:58:51.256 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:01:12.098 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 08:01:12.260 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 08:01:12.260 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 08:01:12.260 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 08:01:12.260 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 08:01:12.260 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 08:01:12.260 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 08:01:12.401 -08:00 [DBG] Starting grant removal
2019-01-28 08:01:12.577 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 08:01:12.579 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 08:01:12.579 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 08:01:12.579 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 08:01:12.579 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 08:01:12.579 -08:00 [DBG] Error Url: /home/error
2019-01-28 08:01:12.579 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 08:02:56.804 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 08:02:57.650 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 08:02:57.653 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 08:02:57.655 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 08:02:57.665 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 08:02:57.666 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 08:02:57.669 -08:00 [DBG] Start discovery request
2019-01-28 08:02:58.227 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 08:02:58.257 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 08:02:58.267 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 08:02:58.268 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 08:02:58.276 -08:00 [DBG] Start authorize request
2019-01-28 08:02:58.283 -08:00 [DBG] No user present in authorize request
2019-01-28 08:02:58.295 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 08:02:58.703 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:02:58.708 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:02:58.798 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:02:58.845 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:02:58.898 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:02:58.914 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:02:58.920 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 08:02:58.930 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"7f7e8e4de04d4b3bbc97487d97fdb4a3","UiLocales":null,"Nonce":"ce8a3aca1aa1407c90dced22676baff6","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"7f7e8e4de04d4b3bbc97487d97fdb4a3","nonce":"ce8a3aca1aa1407c90dced22676baff6"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 08:02:58.939 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 08:03:08.606 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 08:03:08.858 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:03:08.858 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:03:08.935 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:03:08.959 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:03:09.031 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:03:09.053 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:03:09.053 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 08:05:10.960 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:05:10.960 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:18:21.431 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 08:18:21.572 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 08:18:21.572 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 08:18:21.572 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 08:18:21.572 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 08:18:21.572 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 08:18:21.572 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 08:18:21.711 -08:00 [DBG] Starting grant removal
2019-01-28 08:18:21.875 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 08:18:21.877 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 08:18:21.877 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 08:18:21.877 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 08:18:21.877 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 08:18:21.877 -08:00 [DBG] Error Url: /home/error
2019-01-28 08:18:21.877 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 08:18:57.859 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 08:18:58.713 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 08:18:58.717 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 08:18:58.718 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 08:18:58.752 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 08:18:58.753 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 08:18:58.755 -08:00 [DBG] Start discovery request
2019-01-28 08:18:59.308 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 08:18:59.345 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 08:18:59.349 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 08:18:59.349 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 08:18:59.352 -08:00 [DBG] Start authorize request
2019-01-28 08:18:59.364 -08:00 [DBG] No user present in authorize request
2019-01-28 08:18:59.377 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 08:18:59.826 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:18:59.832 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:18:59.928 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:18:59.976 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:19:00.038 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:19:00.063 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:19:00.071 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 08:19:00.083 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"6f88e3eb42244ebe80384439be6ceec3","UiLocales":null,"Nonce":"92d6ed1ae5bc450091adb5d042712e04","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"6f88e3eb42244ebe80384439be6ceec3","nonce":"92d6ed1ae5bc450091adb5d042712e04"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 08:19:00.092 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 08:19:08.665 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 08:19:09.039 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:19:09.039 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:19:09.111 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:19:09.146 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:19:09.222 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:19:09.246 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:19:09.246 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 08:19:17.826 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:19:17.826 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:23:48.893 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 08:23:49.179 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:23:49.179 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:23:49.267 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:23:49.298 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:23:49.369 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 08:23:49.392 -08:00 [DBG] Found [] API scopes in database
2019-01-28 08:23:49.392 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 08:23:49.616 -08:00 [DBG] angular_spa found in database: true
2019-01-28 08:23:49.617 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 08:24:58.021 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 08:26:23.796 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback() in S:\netcore_tutorials\sts_tutorials\Quickstart\Account\AccountController.cs:line 190
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-01-28 09:01:22.552 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 09:01:22.722 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 09:01:22.722 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 09:01:22.722 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 09:01:22.723 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 09:01:22.723 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 09:01:22.723 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 09:01:22.861 -08:00 [DBG] Starting grant removal
2019-01-28 09:01:23.017 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 09:01:23.019 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 09:01:23.019 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 09:01:23.019 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 09:01:23.019 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 09:01:23.019 -08:00 [DBG] Error Url: /home/error
2019-01-28 09:01:23.019 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 09:02:24.070 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 09:02:24.912 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 09:02:24.916 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 09:02:24.917 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 09:02:24.928 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 09:02:24.928 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 09:02:24.931 -08:00 [DBG] Start discovery request
2019-01-28 09:02:25.518 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 09:02:25.559 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 09:02:25.562 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 09:02:25.562 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 09:02:25.565 -08:00 [DBG] Start authorize request
2019-01-28 09:02:25.572 -08:00 [DBG] No user present in authorize request
2019-01-28 09:02:25.583 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 09:02:25.976 -08:00 [DBG] angular_spa found in database: true
2019-01-28 09:02:25.981 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 09:02:26.083 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 09:02:26.135 -08:00 [DBG] Found [] API scopes in database
2019-01-28 09:02:26.188 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 09:02:26.205 -08:00 [DBG] Found [] API scopes in database
2019-01-28 09:02:26.210 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 09:02:26.221 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"062fa94e97a944b8bd6d93cfb0fc2d33","UiLocales":null,"Nonce":"2fc0ee89af5f4384a6994be267a6e5c0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"062fa94e97a944b8bd6d93cfb0fc2d33","nonce":"2fc0ee89af5f4384a6994be267a6e5c0"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 09:02:26.231 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 09:02:30.184 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 09:02:30.455 -08:00 [DBG] angular_spa found in database: true
2019-01-28 09:02:30.455 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 09:02:30.548 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 09:02:30.571 -08:00 [DBG] Found [] API scopes in database
2019-01-28 09:02:30.646 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 09:02:30.669 -08:00 [DBG] Found [] API scopes in database
2019-01-28 09:02:30.669 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 09:02:30.893 -08:00 [DBG] angular_spa found in database: true
2019-01-28 09:02:30.893 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 09:02:47.988 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 09:02:48.260 -08:00 [DBG] angular_spa found in database: true
2019-01-28 09:02:48.260 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 09:02:48.329 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 09:02:48.351 -08:00 [DBG] Found [] API scopes in database
2019-01-28 09:02:48.433 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 09:02:48.456 -08:00 [DBG] Found [] API scopes in database
2019-01-28 09:02:48.456 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 09:02:48.673 -08:00 [DBG] angular_spa found in database: true
2019-01-28 09:02:48.673 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 09:03:10.004 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 10:04:48.976 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 10:04:49.123 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 10:04:49.123 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 10:04:49.123 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 10:04:49.123 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 10:04:49.123 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 10:04:49.124 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 10:04:49.269 -08:00 [DBG] Starting grant removal
2019-01-28 10:04:49.412 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 10:04:49.414 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 10:04:49.414 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 10:04:49.414 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 10:04:49.414 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 10:04:49.414 -08:00 [DBG] Error Url: /home/error
2019-01-28 10:04:49.414 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 10:18:05.378 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 10:18:05.516 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 10:18:05.517 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 10:18:05.517 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 10:18:05.517 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 10:18:05.517 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 10:18:05.517 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 10:18:05.665 -08:00 [DBG] Starting grant removal
2019-01-28 10:18:05.965 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 10:18:05.967 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 10:18:05.967 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 10:18:05.967 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 10:18:05.967 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 10:18:05.967 -08:00 [DBG] Error Url: /home/error
2019-01-28 10:18:05.967 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 10:18:31.955 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 10:18:32.782 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 10:18:32.785 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 10:18:32.786 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 10:18:32.796 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 10:18:32.796 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 10:18:32.799 -08:00 [DBG] Start discovery request
2019-01-28 10:18:33.385 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 10:18:33.420 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 10:18:33.423 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 10:18:33.423 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 10:18:33.426 -08:00 [DBG] Start authorize request
2019-01-28 10:18:33.434 -08:00 [DBG] No user present in authorize request
2019-01-28 10:18:33.446 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 10:18:33.838 -08:00 [DBG] angular_spa found in database: true
2019-01-28 10:18:33.842 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 10:18:33.927 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 10:18:33.989 -08:00 [DBG] Found [] API scopes in database
2019-01-28 10:18:34.047 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 10:18:34.061 -08:00 [DBG] Found [] API scopes in database
2019-01-28 10:18:34.067 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 10:18:34.077 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"cfc8e2cca03045f7a65cce45d9ed8241","UiLocales":null,"Nonce":"65717831cf9e4eb5bf1258bb87895bb4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"cfc8e2cca03045f7a65cce45d9ed8241","nonce":"65717831cf9e4eb5bf1258bb87895bb4"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 10:18:34.086 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 10:22:27.378 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 10:22:27.628 -08:00 [DBG] angular_spa found in database: true
2019-01-28 10:22:27.628 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 10:22:27.698 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 10:22:27.725 -08:00 [DBG] Found [] API scopes in database
2019-01-28 10:22:27.794 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 10:22:27.817 -08:00 [DBG] Found [] API scopes in database
2019-01-28 10:22:27.817 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:14:23.942 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 11:14:24.088 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 11:14:24.088 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 11:14:24.088 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 11:14:24.088 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 11:14:24.089 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 11:14:24.089 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 11:14:24.246 -08:00 [DBG] Starting grant removal
2019-01-28 11:14:24.578 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 11:14:24.580 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 11:14:24.580 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 11:14:24.580 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 11:14:24.580 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 11:14:24.580 -08:00 [DBG] Error Url: /home/error
2019-01-28 11:14:24.580 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 11:15:17.804 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 11:15:18.728 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 11:15:18.732 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 11:15:18.734 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 11:15:18.783 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 11:15:18.783 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 11:15:18.786 -08:00 [DBG] Start discovery request
2019-01-28 11:15:19.390 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 11:15:19.430 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 11:15:19.433 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 11:15:19.433 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 11:15:19.437 -08:00 [DBG] Start authorize request
2019-01-28 11:15:19.444 -08:00 [DBG] No user present in authorize request
2019-01-28 11:15:19.457 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:15:19.888 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:15:19.893 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:15:19.989 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:15:20.037 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:15:20.093 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:15:20.108 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:15:20.114 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:15:20.124 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"89e943ba69ac4452832b5e40816020f5","UiLocales":null,"Nonce":"55bef1fab1d4453c8ffd132d7d813e39","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"89e943ba69ac4452832b5e40816020f5","nonce":"55bef1fab1d4453c8ffd132d7d813e39"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 11:15:20.135 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 11:15:37.339 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:15:37.605 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:15:37.605 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:15:37.680 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:15:37.702 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:15:37.773 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:15:37.797 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:15:37.798 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:22:51.429 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:22:51.429 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:24:07.520 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 11:24:07.655 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 11:24:07.655 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 11:24:07.655 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 11:24:07.655 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 11:24:07.655 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 11:24:07.655 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 11:24:07.811 -08:00 [DBG] Starting grant removal
2019-01-28 11:24:08.123 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 11:24:08.125 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 11:24:08.125 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 11:24:08.125 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 11:24:08.125 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 11:24:08.125 -08:00 [DBG] Error Url: /home/error
2019-01-28 11:24:08.125 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 11:24:30.521 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 11:24:32.041 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 11:24:32.045 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 11:24:32.046 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 11:24:32.098 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 11:24:32.099 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 11:24:32.102 -08:00 [DBG] Start discovery request
2019-01-28 11:24:32.940 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 11:24:32.985 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 11:24:32.988 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 11:24:32.989 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 11:24:32.993 -08:00 [DBG] Start authorize request
2019-01-28 11:24:32.999 -08:00 [DBG] No user present in authorize request
2019-01-28 11:24:33.010 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:24:33.445 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:24:33.449 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:24:33.547 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:24:33.599 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:24:33.656 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:24:33.672 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:24:33.677 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:24:33.689 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"f118b37c612b44309bf111282fbeb108","UiLocales":null,"Nonce":"73ece95faeaa4c08b1d33a8a325e7fbe","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"f118b37c612b44309bf111282fbeb108","nonce":"73ece95faeaa4c08b1d33a8a325e7fbe"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 11:24:33.699 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 11:24:46.419 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:24:46.692 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:24:46.692 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:24:46.759 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:24:46.781 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:24:46.852 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:24:46.875 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:24:46.875 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:25:00.713 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:25:00.713 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:36:16.297 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 11:36:16.452 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 11:36:16.452 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 11:36:16.452 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 11:36:16.453 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 11:36:16.453 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 11:36:16.453 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 11:36:16.603 -08:00 [DBG] Starting grant removal
2019-01-28 11:36:16.909 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 11:36:16.910 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 11:36:16.910 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 11:36:16.910 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 11:36:16.910 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 11:36:16.911 -08:00 [DBG] Error Url: /home/error
2019-01-28 11:36:16.911 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 11:38:13.394 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 11:38:14.370 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 11:38:14.373 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 11:38:14.375 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 11:38:14.388 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 11:38:14.388 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 11:38:14.391 -08:00 [DBG] Start discovery request
2019-01-28 11:38:15.108 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 11:38:15.142 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 11:38:15.145 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 11:38:15.145 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 11:38:15.149 -08:00 [DBG] Start authorize request
2019-01-28 11:38:15.157 -08:00 [DBG] No user present in authorize request
2019-01-28 11:38:15.171 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:38:15.627 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:38:15.634 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:38:15.739 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:38:15.787 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:38:15.843 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:38:15.861 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:38:15.870 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:38:15.880 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"3ae52cc3d1144dca86740a3f773d7028","UiLocales":null,"Nonce":"ade3abdd37634feba0e84f8b0473fadd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"3ae52cc3d1144dca86740a3f773d7028","nonce":"ade3abdd37634feba0e84f8b0473fadd"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 11:38:15.890 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 11:39:03.016 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:39:03.299 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:39:03.299 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:39:03.371 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:39:03.400 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:39:03.470 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:39:03.493 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:39:03.493 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:39:11.888 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:39:11.888 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:46:51.435 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 11:46:52.176 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:46:52.176 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 11:46:52.254 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:46:52.282 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:46:52.366 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 11:46:52.402 -08:00 [DBG] Found [] API scopes in database
2019-01-28 11:46:52.402 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 11:47:02.306 -08:00 [DBG] angular_spa found in database: true
2019-01-28 11:47:02.306 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 13:29:16.342 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 13:29:16.478 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 13:29:16.478 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 13:29:16.478 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 13:29:16.478 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 13:29:16.478 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 13:29:16.478 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 13:29:16.620 -08:00 [DBG] Starting grant removal
2019-01-28 13:29:16.979 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 13:29:16.981 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 13:29:16.981 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 13:29:16.981 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 13:29:16.981 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 13:29:16.981 -08:00 [DBG] Error Url: /home/error
2019-01-28 13:29:16.981 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 13:29:55.632 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 13:29:56.445 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 13:29:56.448 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 13:29:56.450 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 13:29:56.472 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 13:29:56.472 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 13:29:56.475 -08:00 [DBG] Start discovery request
2019-01-28 13:29:57.018 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 13:29:57.061 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 13:29:57.064 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 13:29:57.064 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 13:29:57.068 -08:00 [DBG] Start authorize request
2019-01-28 13:29:57.083 -08:00 [DBG] No user present in authorize request
2019-01-28 13:29:57.094 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 13:29:57.477 -08:00 [DBG] angular_spa found in database: true
2019-01-28 13:29:57.482 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 13:29:57.570 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 13:29:57.614 -08:00 [DBG] Found [] API scopes in database
2019-01-28 13:29:57.666 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 13:29:57.683 -08:00 [DBG] Found [] API scopes in database
2019-01-28 13:29:57.688 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 13:29:57.698 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"81aa0a37a5704a4799245c2fbe7a2a28","UiLocales":null,"Nonce":"5cb92a51ea614e8fa44d408a67295bcd","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"81aa0a37a5704a4799245c2fbe7a2a28","nonce":"5cb92a51ea614e8fa44d408a67295bcd"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 13:29:57.709 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 13:30:16.854 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 13:30:17.225 -08:00 [DBG] angular_spa found in database: true
2019-01-28 13:30:17.225 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 13:30:17.321 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 13:30:17.345 -08:00 [DBG] Found [] API scopes in database
2019-01-28 13:30:17.422 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 13:30:17.473 -08:00 [DBG] Found [] API scopes in database
2019-01-28 13:30:17.473 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 13:30:17.761 -08:00 [DBG] angular_spa found in database: true
2019-01-28 13:30:17.761 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 13:32:16.737 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 13:32:16.993 -08:00 [DBG] angular_spa found in database: true
2019-01-28 13:32:16.993 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 13:32:17.065 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 13:32:17.090 -08:00 [DBG] Found [] API scopes in database
2019-01-28 13:32:17.157 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 13:32:17.180 -08:00 [DBG] Found [] API scopes in database
2019-01-28 13:32:17.180 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 13:32:29.589 -08:00 [DBG] angular_spa found in database: true
2019-01-28 13:32:29.589 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 13:38:42.303 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 16:06:09.510 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 16:06:09.824 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 16:06:09.824 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 16:06:09.824 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 16:06:09.824 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 16:06:09.824 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 16:06:09.824 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 16:06:09.955 -08:00 [DBG] Starting grant removal
2019-01-28 16:06:10.254 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 16:06:10.256 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 16:06:10.256 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 16:06:10.256 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 16:06:10.256 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 16:06:10.256 -08:00 [DBG] Error Url: /home/error
2019-01-28 16:06:10.256 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 16:08:15.878 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 16:08:16.880 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 16:08:16.883 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 16:08:16.885 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 16:08:16.910 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 16:08:16.910 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 16:08:16.913 -08:00 [DBG] Start discovery request
2019-01-28 16:08:17.528 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 16:08:17.559 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 16:08:17.563 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 16:08:17.563 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 16:08:17.566 -08:00 [DBG] Start authorize request
2019-01-28 16:08:17.572 -08:00 [DBG] No user present in authorize request
2019-01-28 16:08:17.623 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 16:08:18.012 -08:00 [DBG] angular_spa found in database: true
2019-01-28 16:08:18.017 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 16:08:18.100 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 16:08:18.144 -08:00 [DBG] Found [] API scopes in database
2019-01-28 16:08:18.197 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 16:08:18.214 -08:00 [DBG] Found [] API scopes in database
2019-01-28 16:08:18.219 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 16:08:18.229 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"fbc7270d17da40f5a0ec0f39e0528fe7","UiLocales":null,"Nonce":"a41d31ae60e2484fae4fff7b65fcf3be","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"fbc7270d17da40f5a0ec0f39e0528fe7","nonce":"a41d31ae60e2484fae4fff7b65fcf3be"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 16:08:18.238 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 16:08:23.184 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 16:08:23.415 -08:00 [DBG] angular_spa found in database: true
2019-01-28 16:08:23.415 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 16:08:23.482 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 16:08:23.504 -08:00 [DBG] Found [] API scopes in database
2019-01-28 16:08:23.587 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 16:08:23.610 -08:00 [DBG] Found [] API scopes in database
2019-01-28 16:08:23.610 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 16:08:28.581 -08:00 [DBG] angular_spa found in database: true
2019-01-28 16:08:28.581 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 16:09:21.018 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 16:09:21.304 -08:00 [DBG] angular_spa found in database: true
2019-01-28 16:09:21.304 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 16:09:21.373 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 16:09:21.397 -08:00 [DBG] Found [] API scopes in database
2019-01-28 16:09:21.463 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 16:09:21.486 -08:00 [DBG] Found [] API scopes in database
2019-01-28 16:09:21.486 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 16:09:21.717 -08:00 [DBG] angular_spa found in database: true
2019-01-28 16:09:21.717 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 16:23:13.493 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 19:07:04.119 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback() in S:\netcore_tutorials\sts_tutorials\Quickstart\Account\AccountController.cs:line 191
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-01-28 19:07:04.624 -08:00 [INF] Removing 0 grants
2019-01-28 19:59:03.595 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 19:59:03.737 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 19:59:03.737 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 19:59:03.737 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 19:59:03.737 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 19:59:03.737 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 19:59:03.737 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 19:59:03.884 -08:00 [DBG] Starting grant removal
2019-01-28 19:59:04.202 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 19:59:04.204 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 19:59:04.204 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 19:59:04.204 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 19:59:04.204 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 19:59:04.204 -08:00 [DBG] Error Url: /home/error
2019-01-28 19:59:04.204 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 20:01:11.969 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 20:01:12.772 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 20:01:12.775 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 20:01:12.777 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 20:01:12.789 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 20:01:12.789 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 20:01:12.792 -08:00 [DBG] Start discovery request
2019-01-28 20:01:13.337 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 20:01:13.378 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 20:01:13.380 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 20:01:13.381 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 20:01:13.384 -08:00 [DBG] Start authorize request
2019-01-28 20:01:13.390 -08:00 [DBG] No user present in authorize request
2019-01-28 20:01:13.402 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:01:13.819 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:01:13.824 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:01:13.914 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:01:13.960 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:01:14.017 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:01:14.052 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:01:14.057 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:01:14.069 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"0785f4c8d5c54edb97182ee55f47a884","UiLocales":null,"Nonce":"f6ecad7adba544b0883f06a8cfc9231c","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"0785f4c8d5c54edb97182ee55f47a884","nonce":"f6ecad7adba544b0883f06a8cfc9231c"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 20:01:14.080 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 20:01:18.157 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:01:18.392 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:01:18.392 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:01:18.458 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:01:18.482 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:01:18.587 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:01:18.617 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:01:18.617 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:01:18.837 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:01:18.837 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:01:33.253 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:01:33.489 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:01:33.489 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:01:33.557 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:01:33.592 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:01:33.679 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:01:33.703 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:01:33.703 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:01:33.919 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:01:33.919 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:05:10.707 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 20:05:41.886 -08:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: External authentication error
   at IdentityServer4.Quickstart.UI.AccountController.ExternalLoginCallback() in S:\netcore_tutorials\sts_tutorials\Quickstart\Account\AccountController.cs:line 191
   at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at System.Threading.Tasks.ValueTask`1.get_Result()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()
   at Microsoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 72
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at sts_tutorials.Startup.<>c.<<Configure>b__8_1>d.MoveNext() in S:\netcore_tutorials\sts_tutorials\Startup.cs:line 191
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-01-28 20:26:47.317 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 20:26:47.455 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 20:26:47.455 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 20:26:47.455 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 20:26:47.455 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 20:26:47.455 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 20:26:47.455 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 20:26:47.592 -08:00 [DBG] Starting grant removal
2019-01-28 20:26:47.858 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 20:26:47.859 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 20:26:47.859 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 20:26:47.859 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 20:26:47.859 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 20:26:47.859 -08:00 [DBG] Error Url: /home/error
2019-01-28 20:26:47.859 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 20:27:35.990 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 20:27:36.810 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 20:27:36.813 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 20:27:36.815 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 20:27:36.838 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 20:27:36.838 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 20:27:36.840 -08:00 [DBG] Start discovery request
2019-01-28 20:27:37.392 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 20:27:37.431 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 20:27:37.435 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 20:27:37.435 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 20:27:37.438 -08:00 [DBG] Start authorize request
2019-01-28 20:27:37.445 -08:00 [DBG] No user present in authorize request
2019-01-28 20:27:37.456 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:27:37.849 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:27:37.855 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:27:37.940 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:27:37.982 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:27:38.036 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:27:38.056 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:27:38.061 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:27:38.072 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"868ba21351cb4acdb0ca6a648d765d01","UiLocales":null,"Nonce":"65687117ec654fcbb724cb7141c04c3b","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"868ba21351cb4acdb0ca6a648d765d01","nonce":"65687117ec654fcbb724cb7141c04c3b"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 20:27:38.081 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 20:27:42.666 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:27:42.909 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:27:42.909 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:27:42.977 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:27:43.000 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:27:43.067 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:27:43.090 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:27:43.091 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:27:43.321 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:27:43.321 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:27:55.812 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:27:56.047 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:27:56.047 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:27:56.142 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:27:56.165 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:27:56.263 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:27:56.304 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:27:56.305 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:27:56.517 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:27:56.517 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:29:00.187 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 20:29:00.330 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 20:29:00.330 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 20:29:00.330 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 20:29:00.330 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 20:29:00.330 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 20:29:00.330 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 20:29:00.477 -08:00 [DBG] Starting grant removal
2019-01-28 20:29:00.749 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 20:29:00.751 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 20:29:00.751 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 20:29:00.751 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 20:29:00.751 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 20:29:00.751 -08:00 [DBG] Error Url: /home/error
2019-01-28 20:29:00.751 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 20:29:23.589 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 20:29:24.383 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 20:29:24.386 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 20:29:24.388 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 20:29:24.409 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 20:29:24.409 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 20:29:24.412 -08:00 [DBG] Start discovery request
2019-01-28 20:29:24.978 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 20:29:25.008 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 20:29:25.011 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 20:29:25.011 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 20:29:25.014 -08:00 [DBG] Start authorize request
2019-01-28 20:29:25.032 -08:00 [DBG] No user present in authorize request
2019-01-28 20:29:25.042 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:29:25.419 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:29:25.424 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:29:25.533 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:29:25.585 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:29:25.641 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:29:25.657 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:29:25.662 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:29:25.675 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"ad6da593a27e48feab6bc3a941d5d5d0","UiLocales":null,"Nonce":"d72822e770ac4f9d8c91cc460716ca72","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"ad6da593a27e48feab6bc3a941d5d5d0","nonce":"d72822e770ac4f9d8c91cc460716ca72"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 20:29:25.684 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 20:29:30.579 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:29:30.866 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:29:30.866 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:29:30.933 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:29:30.956 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:29:31.024 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:29:31.046 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:29:31.046 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:29:31.321 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:29:31.321 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:29:45.472 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:29:45.712 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:29:45.712 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:29:45.811 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:29:45.833 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:29:45.902 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:29:45.925 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:29:45.925 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:29:46.146 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:29:46.146 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:30:06.101 -08:00 [INF] AuthenticationScheme: idsrv.external signed in.
2019-01-28 20:46:43.725 -08:00 [INF] Starting IdentityServer4 version 2.3.2.0
2019-01-28 20:46:43.861 -08:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-01-28 20:46:43.861 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-01-28 20:46:43.861 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-01-28 20:46:43.861 -08:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-01-28 20:46:43.861 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-01-28 20:46:43.861 -08:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-01-28 20:46:44.002 -08:00 [DBG] Starting grant removal
2019-01-28 20:46:44.382 -08:00 [DBG] Login Url: /Account/Login
2019-01-28 20:46:44.384 -08:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-01-28 20:46:44.384 -08:00 [DBG] Logout Url: /Account/Logout
2019-01-28 20:46:44.384 -08:00 [DBG] ConsentUrl Url: /consent
2019-01-28 20:46:44.384 -08:00 [DBG] Consent Return Url Parameter: returnUrl
2019-01-28 20:46:44.384 -08:00 [DBG] Error Url: /home/error
2019-01-28 20:46:44.384 -08:00 [DBG] Error Id Parameter: errorId
2019-01-28 20:48:51.517 -08:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:4200
2019-01-28 20:48:52.329 -08:00 [DBG] Origin http://localhost:4200 is allowed: true
2019-01-28 20:48:52.332 -08:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2019-01-28 20:48:52.334 -08:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-01-28 20:48:52.355 -08:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-01-28 20:48:52.355 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-01-28 20:48:52.358 -08:00 [DBG] Start discovery request
2019-01-28 20:48:52.894 -08:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-01-28 20:48:52.925 -08:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-01-28 20:48:52.929 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-01-28 20:48:52.929 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-01-28 20:48:52.932 -08:00 [DBG] Start authorize request
2019-01-28 20:48:52.939 -08:00 [DBG] No user present in authorize request
2019-01-28 20:48:52.948 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:48:53.390 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:48:53.395 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:48:53.482 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:48:53.527 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:48:53.579 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:48:53.596 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:48:53.601 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:48:53.611 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"4e692af153f14cd0b90e2b440e9cb056","UiLocales":null,"Nonce":"4c988250cfef43f5a5db17300bff78c2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"4e692af153f14cd0b90e2b440e9cb056","nonce":"4c988250cfef43f5a5db17300bff78c2"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 20:48:53.620 -08:00 [INF] Showing login: User is not authenticated
2019-01-28 20:48:57.209 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:48:57.473 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:48:57.473 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:48:57.565 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:48:57.598 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:48:57.692 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:48:57.719 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:48:57.719 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:48:58.182 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:48:58.182 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:49:11.950 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:49:12.203 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:49:12.204 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:49:12.275 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:49:12.301 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:49:12.370 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:49:12.394 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:49:12.394 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:49:12.635 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:49:12.635 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:49:26.573 -08:00 [INF] AuthenticationScheme: Identity.External signed in.
2019-01-28 20:56:54.491 -08:00 [INF] {"Username":null,"Provider":"Windows","ProviderUserId":"DEQ\\nquan","SubjectId":"e6577450-acb0-4d6e-9ef6-527001d3c900","DisplayName":"DEQ\\nquan","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLK5KJ2CU09K:00000006","TimeStamp":"2019-01-29T04:56:54.0000000Z","ProcessId":24268,"LocalIpAddress":"127.0.0.1:33931","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-01-28 20:56:55.742 -08:00 [DBG] Augmenting SignInContext
2019-01-28 20:56:55.744 -08:00 [DBG] Adding amr claim with value: external
2019-01-28 20:56:55.748 -08:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-01-28 20:57:13.256 -08:00 [INF] AuthenticationScheme: Identity.External signed out.
2019-01-28 20:57:22.874 -08:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-01-28 20:57:22.875 -08:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-01-28 20:57:22.875 -08:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-01-28 20:57:22.880 -08:00 [DBG] Start authorize callback request
2019-01-28 20:57:22.883 -08:00 [DBG] No user present in authorize request
2019-01-28 20:57:22.883 -08:00 [DBG] Start authorize request protocol validation
2019-01-28 20:57:23.536 -08:00 [DBG] angular_spa found in database: true
2019-01-28 20:57:23.536 -08:00 [DBG] client configuration validation for client angular_spa succeeded.
2019-01-28 20:57:23.590 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:57:23.610 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:57:23.667 -08:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-01-28 20:57:23.684 -08:00 [DBG] Found [] API scopes in database
2019-01-28 20:57:23.684 -08:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-01-28 20:57:23.684 -08:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"angular_spa","ClientName":"Angular 4 Client","RedirectUri":"http://localhost:4200/auth-callback","AllowedRedirectUris":["http://localhost:4200/silent-refresh.html","http://localhost:4200/auth-callback"],"SubjectId":"anonymous","ResponseType":"id_token token","ResponseMode":"fragment","GrantType":"implicit","RequestedScopes":"openid profile","State":"4e692af153f14cd0b90e2b440e9cb056","UiLocales":null,"Nonce":"4c988250cfef43f5a5db17300bff78c2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"angular_spa","redirect_uri":"http://localhost:4200/auth-callback","response_type":"id_token token","scope":"openid profile","state":"4e692af153f14cd0b90e2b440e9cb056","nonce":"4c988250cfef43f5a5db17300bff78c2"},"$type":"AuthorizeRequestValidationLog"}
2019-01-28 20:57:23.684 -08:00 [INF] Showing login: User is not authenticated
